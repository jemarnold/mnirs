% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rescale_mnirs.R
\name{rescale_mnirs}
\alias{rescale_mnirs}
\title{Re-scale data range}
\usage{
rescale_mnirs(data, nirs_channels = list(), range, verbose = TRUE)
}
\arguments{
\item{data}{A data frame of class \emph{"mnirs"} containing at least one
column with numeric time or sample values, and one column with numeric
mNIRS values, along with metadata.}

\item{nirs_channels}{A \code{list()} of character vectors indicating the column
names for data channels to be re-scaled (see \emph{Details}).
\describe{
\item{\code{list("A", "B", "C")}}{Will re-scale each channel independently,
losing the relative scaling between channels.}
\item{\code{list(c("A", "B", "C"))}}{Will re-scale all channels together,
preserving the relative scaling between channels.}
\item{\code{list(c("A", "B"), c("C", "D"))}}{Will re-scale channels \code{A} and
\code{B} in one group, and channels \code{C} and \code{D} in another group,
preserving relative scaling within, but not between groups.}
}
Must match column names in data exactly. Will be taken from metadata if
not defined explicitly.}

\item{range}{A numeric vector in the form \code{c(min, max)}, indicating the
range of output values to which data channels will be re-scaled.}

\item{verbose}{A logical to return (the \emph{default}) or silence warnings and
messages which can be used for data error checking. Abort errors will
always be returned.}
}
\value{
A \link[tibble:tibble-package]{tibble} of class \emph{"mnirs"} with metadata
available with \code{attributes()}.
}
\description{
Expand or reduce the range (min and max values) of data channels to a new
amplitude/dynamic range, e.g. re-scale the range of NIRS data to \code{c(0, 100)}.
}
\details{
\code{nirs_channels = list()} can be used to group data channels to preserve
absolute or relative scaling.
\itemize{
\item Channels grouped together in a list item will be re-scaled to a common
value, and the relative scaling within that group will be preserved.
\item Channels grouped in separate list items will be re-scaled independently,
and relative scaling between groups will be lost.
\item Channels (columns) in \code{data} not explicitly defined in \code{nirs_channels}
will be passed through untouched to the output data frame.
}

\code{nirs_channels} can be retrieved automatically from
\code{data} of class \emph{"mnirs"} which has been processed with \code{{mnirs}},
if not defined explicitly. This will default to returning all
\code{nirs_channels} grouped together, and should be defined explicitly
for other grouping arrangements.
}
\examples{
\dontshow{if ((identical(Sys.getenv("NOT_CRAN"), "true") || identical(Sys.getenv("IN_PKGDOWN"), "true"))) withAutoprint(\{ # examplesIf}
library(ggplot2)

## read example data
data_rescaled <- read_mnirs(
    file_path = example_mnirs("moxy_ramp"),
    nirs_channels = c(smo2 = "SmO2 Live"),
    time_channel = c(time = "hh:mm:ss"),
    verbose = FALSE
) |>
    resample_mnirs(verbose = FALSE) |>
    replace_mnirs(
        invalid_values = c(0, 100),
        outlier_cutoff = 3,
        width = 10,
        verbose = FALSE
    ) |>
    filter_mnirs(na.rm = TRUE, verbose = FALSE) |>
    rescale_mnirs(
        range = c(0, 100),   ## rescale to a 0-100\% functional exercise range
        verbose = FALSE
    )

plot(data_rescaled, label_time = TRUE) +
    geom_hline(yintercept = c(0, 100), linetype = "dotted")
\dontshow{\}) # examplesIf}
}
