% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/filter_mnirs.R
\name{filter_moving_average}
\alias{filter_moving_average}
\title{Apply a moving average filter}
\usage{
filter_moving_average(
  x,
  t = seq_along(x),
  width = NULL,
  span = NULL,
  partial = FALSE,
  na.rm = FALSE,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{x}{A numeric vector of the response variable.}

\item{t}{An \emph{optional} numeric vector of the predictor variable; time
or sample number. \emph{Defaults} to indices of \code{t = seq_along(x)}.}

\item{width}{An integer defining the local window in number of samples
around \code{idx} in which to perform the operation., between
\verb{[idx - floor(width/2), idx + floor(width/2)]}.}

\item{span}{A numeric value defining the local window timespan around \code{idx}
in which to perform the operation. In units of \code{time_channel} or \code{t},
between \verb{[t - span/2, t + span/2]}.}

\item{partial}{A logical specifying whether to perform the operation over a
subset of available data within the local rolling window (\code{TRUE}), or
requiring a complete window of valid samples (\code{FALSE}, by \emph{default}). See
\emph{Details}.}

\item{na.rm}{A logical indicating whether missing values should be preserved
and passed through the filter (\code{TRUE}). Otherwise \code{FALSE} (the \emph{default})
will throw an error if there are any \code{NA}s (see \emph{Details}).}

\item{verbose}{Logical. Default is \code{TRUE}. Will display or silence (if
\code{FALSE}) warnings and information messages helpful for troubleshooting. A
global default can be set via \code{options(mnirs.verbose = FALSE)}.}

\item{...}{Additional arguments.}
}
\value{
A numeric vector the same length as \code{x}.
}
\description{
Apply a simple moving average smoothing filter to vector data
}
\details{
Applies a centred (symmetrical) moving average filter in a local window
defined by either \code{width} as the number of samples around \code{idx} between
\verb{[idx - floor(width/2),} \verb{idx + floor(width/2)]}. Or by \code{span} as the
timespan in units of \code{time_channel} between \verb{[t - span/2, t + span/2]}.

Specifying \code{width} is often faster than \code{span}.

If there are no valid values within the calculation window, will return \code{NA}.
A partial moving average will be calculated at the edges of the data.
}
\examples{
## basic moving average with sample width
x <- c(1, 3, 2, 5, 4, 6, 5, 7)
filter_moving_average(x, width = 3)

## with explicit time vector
t <- c(0, 1, 2, 3, 4, 5, 6, 7)
filter_moving_average(x, t, width = 2)

## using timespan instead of sample width
filter_moving_average(x, span = 2)

}
\seealso{
\code{\link[zoo:rollmean]{zoo::rollmean()}}
}
