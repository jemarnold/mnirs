% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rolling_slope.R
\name{peak_slope}
\alias{peak_slope}
\title{Find peak slope}
\usage{
peak_slope(
  x,
  t = seq_along(x),
  width = NULL,
  span = NULL,
  align = c("centre", "left", "right"),
  direction = c("auto", "positive", "negative"),
  partial = FALSE,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{x}{A numeric vector of the response variable.}

\item{t}{An \emph{optional} numeric vector of the predictor variable; time
or sample number. \emph{Defaults} to indices of \code{t = seq_along(x)}.}

\item{width}{An integer defining the local window in number of samples
around \code{idx} in which to perform the operation, according to \code{align}.}

\item{span}{A numeric value defining the local window timespan around \code{idx}
in which to perform the operation, according to \code{align}. In units of
\code{time_channel} or \code{t}.}

\item{align}{Window alignment as \emph{"centre"/"center"} (the \emph{default}),
\emph{"left"}, or \emph{"right"}. Where \emph{"left"} is \emph{forward looking}, and \emph{"right"}
is \emph{backward looking} from the current sample.}

\item{direction}{A character string to detect either the peak
\code{"positive"} or \code{"negative"} slope, or \code{"auto"} detect (the \emph{default})
based on the overal trend of the signal (see \emph{Details}).}

\item{partial}{A logical specifying whether to perform the operation over a
subset of available data within the local rolling window (\code{TRUE}), or
requiring a complete window of valid samples (\code{FALSE}, by \emph{default}). See
\emph{Details}.}

\item{verbose}{A logical to display (the \emph{default}) or silence (\code{FALSE})
warnings and information messages used for troubleshooting.}

\item{...}{Additional arguments.}
}
\value{
A named list containing:
\item{\code{slope}}{The peak slope value in units of \code{x/t}.}
\item{\code{intercept}}{The y-intercept of the peak local regression equation.}
\item{\code{y}}{The response value predicted from \code{x} at \code{t}.}
\item{\code{t}}{The time value at the index of the peak slope window.}
\item{\code{idx}}{The index position of the peak slope.}
\item{\code{window_idx}}{An integer vector of indices for the peak slope
window.}
}
\description{
Identifies the maximum positive or negative local linear slope within a
numeric vector and returns regression parameters
}
\details{
When \code{direction = "auto"}, the net slope across all of \code{x} is calculated
to determine the trend direction. If the net slope equals zero, will
return the greatest absolute slope.

When \code{direction = "positive"} or \code{"negative"}, returns the greatest
respective directional slope. If no positive/negative slopes exist,
returns \code{NA} with a warning.
}
\examples{
x <- c(1, 3, 2, 5, 8, 7, 9, 12, 11, 15, 14, 17, 18)
peak_slope(x, width = 5)

x_dec <- rev(x)
peak_slope(x_dec, width = 5)

}
