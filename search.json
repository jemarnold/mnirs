[{"path":"https://jemarnold.github.io/mnirs/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 mnirs authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Reading and Cleaning Data with {mnirs}","text":"Modern wearable muscle near-infrared spectroscopy (mNIRS) devices make extremely easy collect local muscle oxygenation data dynamic activities. real challenge comes deciding clean, filter, process, eventually interpret data. mnirs package aims provide standardised, reproducible methods processing analysing NIRS data, helping practitioners detect meaningful signals noise improve confidence interpreting information applying information back clients work . vignette demonstrate : üìÇ Read data files exported various wearable NIRS devices import NIRS channels standard data frame metadata, ready processing. üìä Plot visualise data frames class \"mnirs\". üîç Retrieve metadata stored data frames class \"mnirs\". üßπ Detect replace local outliers, invalid values, interpolate across missing data. ‚è±Ô∏è Re-sample (- -sample) match sample rate recording devices. üìàÔ∏è Apply digital filtering optimise signal--noise ratio responses observed data. ‚öñÔ∏è Shift rescale across multiple NIRS channels, normalise signal dynamic range absolute relative scaling muscle sites NIRS channels. Note mnirs currently . Functionality may change! Stay updated development follow releases github.com/jemarnold/mnirs. {mnirs} designed process mNIRS data, can used read, clean, pre-process time series datasets, require many processing steps. Enjoy!","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"read-data-from-file","dir":"Articles","previous_headings":"","what":"üìÇ Read Data From File","title":"Reading and Cleaning Data with {mnirs}","text":"read example data file two NIRS channels incremental ramp cycling assessment recorded Moxy muscle oxygen monitor. First, install load mnirs package required libraries. mnirs can installed remotes::install_github(\"jemarnold/mnirs\"). first function call almost always read_mnirs(). used read data .csv .xls(x) files exported common wearable mNIRS devices. extract return data table metadata processing analysis. See read_mnirs() details. file_path Specify location NIRS data file, including file extension. e.g.¬†\"./my_file.xlsx\" \"C:/myfolder/my_file.csv\". Example Data Files example data files included mnirs package. File paths can accessed example_mnirs() nirs_channels least one NIRS channel name must specified data table file. accept multiple channel name inputs. time_channel time sample channel name data table also specified explicitly. left blank, function attempt identify time column automatically. event_channel Optionally can specify channel name indicates events laps data table. channel names used detect data table within file, must match exactly column headers file data table. can rename channels reading data format: sample_rate sample rate exported data file (Hz) can either specified explicitly, estimated time_channel data table . usually works well unless irregular sampling, time_channel count samples rather time value, data exported Oxysoft. case, function recognise read correct sample rate file metadata. However, cases sample_rate defined explicitly known. add_timestamp default, time_channel detected date-time format (e.g.; hh:mm:ss), converted numeric time seconds. logical can specify add preserve timestamp column absolute date-time detected file metadata, relative timestamp . zero_time time_channel values start non-zero value, logical can specify re-calculate time starting zero. time_channel converted date-time format, always re-calculated zero. keep_all default, channels specified returned data table. logical return entire data table detected file. Blank/empty columns omitted duplicated invalid column names repaired. verbose mnirs functions may return warnings info messages useful troubleshooting data validation. logical can used silence messages.","code":"# remotes::install_github(\"jemarnold/mnirs\") ## install development version library(ggplot2) ## load for plotting library(mnirs) nirs_channels = c(new_name1 = \"original_name1\",                    new_name2 = \"original_name2\") ## {mnirs} includes sample files from a few mNIRS devices example_mnirs() #> [1] \"artinis_intervals.xlsx\"  \"moxy_intervals.csv\"      #> [3] \"moxy_ramp.xlsx\"          \"train.red_intervals.csv\"  ## partial matching will error if matches multiple try(example_mnirs(\"moxy\")) #> Error in example_mnirs(\"moxy\") : ‚úñ Multiple files match \"moxy\": #> ‚Ñπ Matching files: \"moxy_intervals.csv\" and \"moxy_ramp.xlsx\"  ## call an example mNIRS data file file_path <- example_mnirs(\"moxy_ramp\")   data_table <- read_mnirs(     file_path,     nirs_channels = c(         smo2_right = \"SmO2 Live\",        ## identify and rename channels         smo2_left = \"SmO2 Live(2)\"     ),     time_channel = c(time = \"hh:mm:ss\"), ## date-time format will be converted to numeric     event_channel = NULL,                ## left blank, not currently used in analysis     sample_rate = NULL,                  ## sample_rate will be estimated from time column     add_timestamp = FALSE,               ## omit the date-time timestamp column     zero_time = TRUE,                    ## recalculate time values from zero     keep_all = FALSE,                    ## return only the specified data channels     verbose = TRUE                       ## show warnings & messages ) #> ! Estimated `sample_rate` = 2 Hz. #> ‚Ñπ Define `sample_rate` explicitly to override. #> Warning: ! Duplicate or irregular `time_channel` samples detected. #> ‚Ñπ Investigate at `time` = 211.99, 211.99, and 1184. #> ‚Ñπ Re-sample with `mnirs::resample_mnirs()`.  ## ignore the warning about repeated samples for now ‚òù ## Note that sample_rate was estimated correctly at 2 Hz  data_table #> # A tibble: 2,203 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1  0            54        68 #>  2  0.4          54        68 #>  3  0.96         54        68 #>  4  1.51         54        66 #>  5  2.06         54        66 #>  6  2.61         54        66 #>  7  3.16         54        66 #>  8  3.71         57        67 #>  9  4.26         57        67 #> 10  4.81         57        67 #> # ‚Ñπ 2,193 more rows"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"read_mnirs","dir":"Articles","previous_headings":"","what":"read_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"file_path Specify location NIRS data file, including file extension. e.g.¬†\"./my_file.xlsx\" \"C:/myfolder/my_file.csv\". Example Data Files example data files included mnirs package. File paths can accessed example_mnirs() nirs_channels least one NIRS channel name must specified data table file. accept multiple channel name inputs. time_channel time sample channel name data table also specified explicitly. left blank, function attempt identify time column automatically. event_channel Optionally can specify channel name indicates events laps data table. channel names used detect data table within file, must match exactly column headers file data table. can rename channels reading data format: sample_rate sample rate exported data file (Hz) can either specified explicitly, estimated time_channel data table . usually works well unless irregular sampling, time_channel count samples rather time value, data exported Oxysoft. case, function recognise read correct sample rate file metadata. However, cases sample_rate defined explicitly known. add_timestamp default, time_channel detected date-time format (e.g.; hh:mm:ss), converted numeric time seconds. logical can specify add preserve timestamp column absolute date-time detected file metadata, relative timestamp . zero_time time_channel values start non-zero value, logical can specify re-calculate time starting zero. time_channel converted date-time format, always re-calculated zero. keep_all default, channels specified returned data table. logical return entire data table detected file. Blank/empty columns omitted duplicated invalid column names repaired. verbose mnirs functions may return warnings info messages useful troubleshooting data validation. logical can used silence messages.","code":"nirs_channels = c(new_name1 = \"original_name1\",                    new_name2 = \"original_name2\") ## {mnirs} includes sample files from a few mNIRS devices example_mnirs() #> [1] \"artinis_intervals.xlsx\"  \"moxy_intervals.csv\"      #> [3] \"moxy_ramp.xlsx\"          \"train.red_intervals.csv\"  ## partial matching will error if matches multiple try(example_mnirs(\"moxy\")) #> Error in example_mnirs(\"moxy\") : ‚úñ Multiple files match \"moxy\": #> ‚Ñπ Matching files: \"moxy_intervals.csv\" and \"moxy_ramp.xlsx\"  ## call an example mNIRS data file file_path <- example_mnirs(\"moxy_ramp\")   data_table <- read_mnirs(     file_path,     nirs_channels = c(         smo2_right = \"SmO2 Live\",        ## identify and rename channels         smo2_left = \"SmO2 Live(2)\"     ),     time_channel = c(time = \"hh:mm:ss\"), ## date-time format will be converted to numeric     event_channel = NULL,                ## left blank, not currently used in analysis     sample_rate = NULL,                  ## sample_rate will be estimated from time column     add_timestamp = FALSE,               ## omit the date-time timestamp column     zero_time = TRUE,                    ## recalculate time values from zero     keep_all = FALSE,                    ## return only the specified data channels     verbose = TRUE                       ## show warnings & messages ) #> ! Estimated `sample_rate` = 2 Hz. #> ‚Ñπ Define `sample_rate` explicitly to override. #> Warning: ! Duplicate or irregular `time_channel` samples detected. #> ‚Ñπ Investigate at `time` = 211.99, 211.99, and 1184. #> ‚Ñπ Re-sample with `mnirs::resample_mnirs()`.  ## ignore the warning about repeated samples for now ‚òù ## Note that sample_rate was estimated correctly at 2 Hz  data_table #> # A tibble: 2,203 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1  0            54        68 #>  2  0.4          54        68 #>  3  0.96         54        68 #>  4  1.51         54        66 #>  5  2.06         54        66 #>  6  2.61         54        66 #>  7  3.16         54        66 #>  8  3.71         57        67 #>  9  4.26         57        67 #> 10  4.81         57        67 #> # ‚Ñπ 2,193 more rows"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"plot-mnirs-data","dir":"Articles","previous_headings":"","what":"üìä Plot mnirs data","title":"Reading and Cleaning Data with {mnirs}","text":"mnirs data can easily visualised calling plot(). generic plot function uses package ggplot2 work data frames generated read mnirs functions metadata contain class = \"mnirs\".  mnirs includes custom ggplot2 theme colour palette available theme_mnirs() palette_mnirs(). See documentation references details.","code":"## note the hidden plot option to display time values as `hh:mm:ss` plot(data_table, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"metadata-stored-in-mnirs-data-frames","dir":"Articles","previous_headings":"","what":"üîç Metadata stored in mnirs data frames","title":"Reading and Cleaning Data with {mnirs}","text":"Data frames generated read mnirs functions return class = \"mnirs\" contain metadata, can retrieved attributes(data). Instead re-defining values like channel names sample rate, certain mnirs functions automatically retrieve metadata. can always overwritten manually subsequent functions, using helper function create_mnirs_data(). See create_mnirs_data() details metadata.","code":"## view metadata, omitting item two (a list of row numbers) attributes(data_table)[-2] #> $class #> [1] \"mnirs\"      \"tbl_df\"     \"tbl\"        \"data.frame\" #>  #> $names #> [1] \"time\"       \"smo2_right\" \"smo2_left\"  #>  #> $nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  #>  #> $time_channel #> [1] \"time\" #>  #> $sample_rate #> [1] 2  ## define nirs_channels externally for later use nirs_channels <- attr(data_table, \"nirs_channels\") nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  ## add nirs device to metadata data_table <- create_mnirs_data(data_table, nirs_device = \"Moxy\")  ## check that the added metadata is now present attr(data_table, \"nirs_device\") #> [1] \"Moxy\""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"replace-local-outliers-invalid-values-and-missing-values","dir":"Articles","previous_headings":"","what":"üßπ Replace local outliers, invalid values, and missing values","title":"Reading and Cleaning Data with {mnirs}","text":"can see data issues plot , let‚Äôs clean single data wrangling function replace_mnirs(), prepare digital filtering smoothing. mnirs tries include functions work vector data, convenience wrapper functions can used multiple specified columns data frame . Let‚Äôs explain functionality data-wide function, details vector-specific functions see replace_mnirs(). data Data-wide functions take data frame, apply processing channels specified, return processed data frame. mnirs metadata passed function./ / also pipe-friendly Base R 4.1+ (|>) magrittr (%>%) pipes chain operations together. nirs_channels Specify column names data processed, .e.¬†response variables. specified, channels retrieved mnirs metadata. time_channels time channel can specified, .e.¬†predictor variable, retrieved mnirs metadata. specified present metadata, sample index used instead. can alter results unintended ways, suggest time_channel specified explicitly. invalid_values, invalid_above, invalid_below Invalid values can specified replacement, e.g.¬†NIRS device exports 0, 100, fixed value signal recording lost. spikes drops present data, can replaced specifying values consider invalid. left NULL, values replaced. outlier_cutoff Local outliers can detected using cutoff calculated local median value. default value 3 recommended. left NULL, outliers replaced. width span Local outlier detection median interpolation method occurs within rolling local window specified one either width span. width defines number samples either side local index sample (idx), whereas span defines range time units time_channel (specified) either side idx. method Missing data (NAs), invalid values, local outliers specified can replaced via interpolation fill methods; either \"linear\" interpolation, fill local \"median\", \"locf\" fill, stands ‚Äúlast observation carried forward‚Äù./ / NAs can preserved method = \"none\". However, subsequent processing & analysis steps may return errors NAs present. Therefore, good practice identify deal missing data early data processing. verbose , logical toggle warnings info messages.  cleaned obvious data issues.","code":"data_cleaned <- replace_mnirs(     data_table,     nirs_channels = NULL,       ## default to all nirs_channels in metadata     time_channel = NULL,        ## default to time_channel in metadata     invalid_values = 0,         ## known invalid values in the data     invalid_above = 90,     outlier_cutoff = 3,         ## recommended default value     width = 10,                 ## local window to detect local outliers and replace missing values     method = \"linear\"           ## linear interpolation over `NA`s )  plot(data_cleaned, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"replace_mnirs","dir":"Articles","previous_headings":"","what":"replace_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"data Data-wide functions take data frame, apply processing channels specified, return processed data frame. mnirs metadata passed function./ / also pipe-friendly Base R 4.1+ (|>) magrittr (%>%) pipes chain operations together. nirs_channels Specify column names data processed, .e.¬†response variables. specified, channels retrieved mnirs metadata. time_channels time channel can specified, .e.¬†predictor variable, retrieved mnirs metadata. specified present metadata, sample index used instead. can alter results unintended ways, suggest time_channel specified explicitly. invalid_values, invalid_above, invalid_below Invalid values can specified replacement, e.g.¬†NIRS device exports 0, 100, fixed value signal recording lost. spikes drops present data, can replaced specifying values consider invalid. left NULL, values replaced. outlier_cutoff Local outliers can detected using cutoff calculated local median value. default value 3 recommended. left NULL, outliers replaced. width span Local outlier detection median interpolation method occurs within rolling local window specified one either width span. width defines number samples either side local index sample (idx), whereas span defines range time units time_channel (specified) either side idx. method Missing data (NAs), invalid values, local outliers specified can replaced via interpolation fill methods; either \"linear\" interpolation, fill local \"median\", \"locf\" fill, stands ‚Äúlast observation carried forward‚Äù./ / NAs can preserved method = \"none\". However, subsequent processing & analysis steps may return errors NAs present. Therefore, good practice identify deal missing data early data processing. verbose , logical toggle warnings info messages.  cleaned obvious data issues.","code":"data_cleaned <- replace_mnirs(     data_table,     nirs_channels = NULL,       ## default to all nirs_channels in metadata     time_channel = NULL,        ## default to time_channel in metadata     invalid_values = 0,         ## known invalid values in the data     invalid_above = 90,     outlier_cutoff = 3,         ## recommended default value     width = 10,                 ## local window to detect local outliers and replace missing values     method = \"linear\"           ## linear interpolation over `NA`s )  plot(data_cleaned, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"resample-data","dir":"Articles","previous_headings":"","what":"‚è±Ô∏è Resample Data","title":"Reading and Cleaning Data with {mnirs}","text":"Say NIRS data recorded 25 Hz, interested exercise responses time span 5-minutes, heart rate data recorded 1 Hz anyway. may easier faster work NIRS data -sampled 25 1 Hz. Alternatively, something like high-frequency EMG data, may want -sample NIRS data match samples analysis. Although, cautious -sampling can artificially inflate confidence subsequent analysis modelling methods. data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. time_channel & sample_rate data contains mnirs metadata, channels detected automatically. can specified explicitly. resample_rate Resampling can specified number samples per second (Hz). default resample_rate re-sample back existing sample_rate data. can useful average irregular sampling resulting unequal time values. Linear interpolation used re-sample time_channel round values sample_rate. took care warning irregular samples saw earlier. Although nothing noticeable plot scale. Use resample_mnirs() smooth irregular skipped samples getting warning read_mnirs() duplicated irregular samples, resample_mnirs() can used restore regular sample rate interpolate across skipped samples.","code":"data_resampled <- resample_mnirs(     data_cleaned,     # time_channel = NULL,        ## retrieved from metadata     # sample_rate = NULL,     # resample_rate = sample_rate ## the default will re-sample to sample_rate     method = \"linear\",            ## default linear interpolation across any new samples     verbose = TRUE                ## will confirm the output sample rate ) #> ‚Ñπ Output is resampled at 2 Hz.  ## note the altered \"time\" values üëá data_resampled #> # A tibble: 2,419 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1   0         54        68   #>  2   0.5       54        68   #>  3   1         54        67.9 #>  4   1.5       54        66.0 #>  5   2         54        66   #>  6   2.5       54        66   #>  7   3         54        66   #>  8   3.5       55.9      66.6 #>  9   4         57        67   #> 10   4.5       57        67   #> # ‚Ñπ 2,409 more rows"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"resample_mnirs","dir":"Articles","previous_headings":"","what":"resample_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. time_channel & sample_rate data contains mnirs metadata, channels detected automatically. can specified explicitly. resample_rate Resampling can specified number samples per second (Hz). default resample_rate re-sample back existing sample_rate data. can useful average irregular sampling resulting unequal time values. Linear interpolation used re-sample time_channel round values sample_rate. took care warning irregular samples saw earlier. Although nothing noticeable plot scale. Use resample_mnirs() smooth irregular skipped samples getting warning read_mnirs() duplicated irregular samples, resample_mnirs() can used restore regular sample rate interpolate across skipped samples.","code":"data_resampled <- resample_mnirs(     data_cleaned,     # time_channel = NULL,        ## retrieved from metadata     # sample_rate = NULL,     # resample_rate = sample_rate ## the default will re-sample to sample_rate     method = \"linear\",            ## default linear interpolation across any new samples     verbose = TRUE                ## will confirm the output sample rate ) #> ‚Ñπ Output is resampled at 2 Hz.  ## note the altered \"time\" values üëá data_resampled #> # A tibble: 2,419 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1   0         54        68   #>  2   0.5       54        68   #>  3   1         54        67.9 #>  4   1.5       54        66.0 #>  5   2         54        66   #>  6   2.5       54        66   #>  7   3         54        66   #>  8   3.5       55.9      66.6 #>  9   4         57        67   #> 10   4.5       57        67   #> # ‚Ñπ 2,409 more rows"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"digital-filtering","dir":"Articles","previous_headings":"","what":"üìà Digital Filtering","title":"Reading and Cleaning Data with {mnirs}","text":"want improve signal--noise ratio dataset without losing information, apply digital filtering smooth data. digital filtering methods available mnirs. option best depend large part sample rate data frequency response/phenomena observed. Choosing filter parameters important processing step improve signal--noise ratio enhance subsequent interpretations. -filtering data can introduce data artefacts can negatively influence signal analysis interpretations just much trying analyse overly-noisy raw data. perfectly valid choose digital filter empirically checking various filter parameters signal response interest appears visually optimised signal--noise ratio minimal data artefacts, satisfaction. process choosing digital filter topic another vignette <currently development>. data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels, time_channel, & sample_rate data contains mnirs metadata, channels detected automatically. can specified explicitly. na.rm important argument left FALSE default. return error missing data (NAs) detected response variables (nirs_channels) processed. Setting na.rm = TRUE bypass NAs preserve returned data frame, must opted explicitly function elsewhere. method = \"smooth-spline\" default non-parametric cubic smoothing spline often good first filtering option examining data longer time span responses observed multiple minutes. rapid repeated responses, smoothing-spline may work well. spar smoothing parameter cubic spline can determined automatically, specified explicitly. See stats::smooth.spline() method = \"butterworth\" Butterworth low-pass digital filter (specified type = \"low\") probably common method used mNIRS research (whether appropriately, ). certain applications identifying signal known frequency (e.g.¬†cycling/running cadence heart rate), pass-band different filter type may better suited. type filter type specified either c(\"low\", \"high\", \"stop\", \"pass\"). order filter order number, specifying number passes filter performs data. W fc cutoff frequency can specified either W; fraction ([0, 1]) Nyquist frequency, equal half sample_rate data. fc; cutoff frequency Hz, absolute frequency still 0 Hz Nyquist frequency. filtering vector data details Butterworth filter parameters, see filter_butter(). method = \"moving-average\" simplest smoothing method moving average filter applied specified number samples. Commonly, might 5- 15-second centred moving average. width span Moving average filtering occurs within rolling local window specified one either width span. width defines number samples around local index sample (idx), whereas span defines range time units time_channel (specified) around idx. filtering vector data details moving average filter, see filter_moving_average() Let‚Äôs try Butterworth low-pass filter, ‚Äôll specify empirically chosen filter parameters data. See filter_mnirs() details filtering methods respective parameters.","code":"data_filtered <- filter_mnirs(     data_resampled,     # nirs_channel = NULL,  ## retrieved from metadata     # time_channel = NULL,     # sample_rate = NULLL,     method = \"butterworth\", ## Butterworth digital filter is a common choice     type = \"low\",           ## specify a low-pass filter     order = 2,              ## filter order number     W = 0.02                ## filter fractional critical frequency )  ## we will add the non-filtered data back to the plot to compare plot(data_filtered, label_time = TRUE) +     geom_line(         data = data_cleaned,          aes(y = smo2_left, colour = \"smo2_left\"), alpha = 0.4     ) +     geom_line(         data = data_cleaned,          aes(y = smo2_right, colour = \"smo2_right\"), alpha = 0.4     )"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"choosing-a-digital-filter","dir":"Articles","previous_headings":"","what":"Choosing a digital filter","title":"Reading and Cleaning Data with {mnirs}","text":"digital filtering methods available mnirs. option best depend large part sample rate data frequency response/phenomena observed. Choosing filter parameters important processing step improve signal--noise ratio enhance subsequent interpretations. -filtering data can introduce data artefacts can negatively influence signal analysis interpretations just much trying analyse overly-noisy raw data. perfectly valid choose digital filter empirically checking various filter parameters signal response interest appears visually optimised signal--noise ratio minimal data artefacts, satisfaction. process choosing digital filter topic another vignette <currently development>.","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"filter_mnirs","dir":"Articles","previous_headings":"","what":"filter_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels, time_channel, & sample_rate data contains mnirs metadata, channels detected automatically. can specified explicitly. na.rm important argument left FALSE default. return error missing data (NAs) detected response variables (nirs_channels) processed. Setting na.rm = TRUE bypass NAs preserve returned data frame, must opted explicitly function elsewhere. method = \"smooth-spline\" default non-parametric cubic smoothing spline often good first filtering option examining data longer time span responses observed multiple minutes. rapid repeated responses, smoothing-spline may work well. spar smoothing parameter cubic spline can determined automatically, specified explicitly. See stats::smooth.spline() method = \"butterworth\" Butterworth low-pass digital filter (specified type = \"low\") probably common method used mNIRS research (whether appropriately, ). certain applications identifying signal known frequency (e.g.¬†cycling/running cadence heart rate), pass-band different filter type may better suited. type filter type specified either c(\"low\", \"high\", \"stop\", \"pass\"). order filter order number, specifying number passes filter performs data. W fc cutoff frequency can specified either W; fraction ([0, 1]) Nyquist frequency, equal half sample_rate data. fc; cutoff frequency Hz, absolute frequency still 0 Hz Nyquist frequency. filtering vector data details Butterworth filter parameters, see filter_butter(). method = \"moving-average\" simplest smoothing method moving average filter applied specified number samples. Commonly, might 5- 15-second centred moving average. width span Moving average filtering occurs within rolling local window specified one either width span. width defines number samples around local index sample (idx), whereas span defines range time units time_channel (specified) around idx. filtering vector data details moving average filter, see filter_moving_average()","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"smoothing-spline","dir":"Articles","previous_headings":"üìà Digital Filtering","what":"Smoothing-spline","title":"Reading and Cleaning Data with {mnirs}","text":"method = \"smooth-spline\" default non-parametric cubic smoothing spline often good first filtering option examining data longer time span responses observed multiple minutes. rapid repeated responses, smoothing-spline may work well. spar smoothing parameter cubic spline can determined automatically, specified explicitly. See stats::smooth.spline()","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"butterworth-digital-filter","dir":"Articles","previous_headings":"üìà Digital Filtering","what":"Butterworth digital filter","title":"Reading and Cleaning Data with {mnirs}","text":"method = \"butterworth\" Butterworth low-pass digital filter (specified type = \"low\") probably common method used mNIRS research (whether appropriately, ). certain applications identifying signal known frequency (e.g.¬†cycling/running cadence heart rate), pass-band different filter type may better suited. type filter type specified either c(\"low\", \"high\", \"stop\", \"pass\"). order filter order number, specifying number passes filter performs data. W fc cutoff frequency can specified either W; fraction ([0, 1]) Nyquist frequency, equal half sample_rate data. fc; cutoff frequency Hz, absolute frequency still 0 Hz Nyquist frequency. filtering vector data details Butterworth filter parameters, see filter_butter().","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"moving-average","dir":"Articles","previous_headings":"üìà Digital Filtering","what":"Moving average","title":"Reading and Cleaning Data with {mnirs}","text":"method = \"moving-average\" simplest smoothing method moving average filter applied specified number samples. Commonly, might 5- 15-second centred moving average. width span Moving average filtering occurs within rolling local window specified one either width span. width defines number samples around local index sample (idx), whereas span defines range time units time_channel (specified) around idx. filtering vector data details moving average filter, see filter_moving_average()","code":""},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"apply-the-filter","dir":"Articles","previous_headings":"","what":"Apply the filter","title":"Reading and Cleaning Data with {mnirs}","text":"Let‚Äôs try Butterworth low-pass filter, ‚Äôll specify empirically chosen filter parameters data. See filter_mnirs() details filtering methods respective parameters.","code":"data_filtered <- filter_mnirs(     data_resampled,     # nirs_channel = NULL,  ## retrieved from metadata     # time_channel = NULL,     # sample_rate = NULLL,     method = \"butterworth\", ## Butterworth digital filter is a common choice     type = \"low\",           ## specify a low-pass filter     order = 2,              ## filter order number     W = 0.02                ## filter fractional critical frequency )  ## we will add the non-filtered data back to the plot to compare plot(data_filtered, label_time = TRUE) +     geom_line(         data = data_cleaned,          aes(y = smo2_left, colour = \"smo2_left\"), alpha = 0.4     ) +     geom_line(         data = data_cleaned,          aes(y = smo2_right, colour = \"smo2_right\"), alpha = 0.4     )"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"shift-and-rescale-data","dir":"Articles","previous_headings":"","what":"‚öñÔ∏è Shift and Rescale Data","title":"Reading and Cleaning Data with {mnirs}","text":"NIRS values measured absolute scale (even saturation %). Therefore, may need adjust calibrate data normalise NIRS signal values muscle sites, individuals, trials, etc. example, may want set mean baseline value zero NIRS signals start recording. may want compare signal kinetics (rate change time course response) rescaling signal amplitudes dynamic range. functions allow us either shift NIRS values preserving dynamic range (absolute amplitude minimum maximum values) NIRS channels, rescale data new dynamic range larger smaller amplitude. can group NIRS channels together preserve relative scaling among channels. data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels Channels can grouped providing list (e.g.¬†list(c(\"\", \"B\"), c(\"C\"))) channel shifted common scale within group, separate scales groups. relative scaling channels preserved within group, lost across groups.nirs_channels specified explicitly ensure intended grouping structure defined. default mnirs metadata group NIRS channels together. time_channel data contains mnirs metadata, channels detected automatically. can specified explicitly shift amplitude can specified one either shifting signals new value, shifting signals fixed amplitude, given units NIRS signals. width span Shifting can performed mean value within window specified one either width span. width defines number samples around local index sample (idx), whereas span defines range time units time_channel around idx. e.g.¬†width = 1 shift single minimum sample, whereas span = 1 shift minimum mean value samples within one second. position Specifies want shift data; either shifting ‚Äúmin‚Äù, ‚Äúmax‚Äù, ‚Äúfirst‚Äù sample(s). data set, shift NIRS channels mean 2-minute baseline equal zero, give us change deoxygenation baseline incremental cycling protocol.  shifting, ending (minimum) values smo2_left smo2_right similar, starting baseline values different. Whereas shift baseline values zero, can see smo2_right signal smaller deoxygenation amplitude compared smo2_left signal. consider assumptions processing decisions influence interpretations; shifting starting values, normalising starting condition two tissue sites implicitly assuming baseline represents starting condition legs. may appropriate interested relative change (delta) leg intervention exposure (often referred \"‚àáSmO[2]\"). may want rescale data new dynamic range, changing units new amplitude. data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels Channels can grouped providing list (e.g.¬†list(c(\"\", \"B\"), c(\"C\"))) channel rescaled common scale within group, separate scales groups. relative scaling channels preserved within group, lost across groups.nirs_channels specified explicitly ensure intended grouping structure defined. default mnirs metadata group NIRS channels together. range Specifies new dynamic range form c(min, max). example, want calibrate NIRS signals ‚Äòfunctional range‚Äô exercise task, may want rescale 0-100%.  , assumption maximal exercise task, minimum maximum values represent functional capacity tissue observed. normalise functional dynamic range leg. normalising way, differences smo2_left smo2_right appear less pronounced baselines shifted zero. interpretation may smo2_left appears start slightly higher percent ‚Äôs functional range, deoxygenates faster toward ‚Äôs minimum. smo2_right deoxygenates slightly slower work, reoxygenates slightly faster recovery. mnirs functions can piped together. entire pre-processing stage can easily performed sequential pipe. demonstrate , ‚Äôll read different example file recorded Train.Red FYER muscle oxygen sensor. also good time point use global mnirs.verbose argument silence warning & information messages familiar dataset. recommend leaving verbose = TRUE default whenever reading exploring new file.","code":"## our default \"mnirs\" nirs_channel will be grouped together nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  ## to shift each nirs_channel separately, the channels should be un-grouped as.list(nirs_channels) #> [[1]] #> [1] \"smo2_right\" #>  #> [[2]] #> [1] \"smo2_left\"  data_shifted <- shift_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-grouped, as above     to = 0,                                 ## NIRS values will be shifted to zero     span = 120,                             ## shift the first 120 sec of data to zero     position = \"first\" )  plot(data_shifted, label_time = TRUE) +     geom_hline(yintercept = 0, linetype = \"dotted\") data_rescaled <- rescale_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-group `nirs_channels` to rescale each channel separately     range = c(0, 100)                       ## rescale to a 0-100% functional exercise range )  plot(data_rescaled, label_time = TRUE) +     geom_hline(yintercept = c(0, 100), linetype = \"dotted\") options(mnirs.verbose = FALSE)  read_mnirs(     example_mnirs(\"train.red\"),     nirs_channels = c(         smo2_left = \"SmO2 unfiltered\",         smo2_right = \"SmO2 unfiltered\"     ),     time_channel = c(time = \"Timestamp (seconds passed)\"),     zero_time = TRUE ) |>     resample_mnirs() |>     replace_mnirs(         invalid_above = 73,         outlier_cutoff = 3,         span = 7     ) |>     filter_mnirs(         method = \"butterworth\",         order = 2,         W = 0.01     ) |>     shift_mnirs(         nirs_channels = list(\"smo2_left\", \"smo2_right\"),         to = 0,         span = 60,         position = \"first\"     ) |>     rescale_mnirs(         nirs_channels = list(c(\"smo2_left\", \"smo2_right\")),         range = c(0, 100)     ) |>     plot(label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"shift_mnirs","dir":"Articles","previous_headings":"","what":"shift_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels Channels can grouped providing list (e.g.¬†list(c(\"\", \"B\"), c(\"C\"))) channel shifted common scale within group, separate scales groups. relative scaling channels preserved within group, lost across groups.nirs_channels specified explicitly ensure intended grouping structure defined. default mnirs metadata group NIRS channels together. time_channel data contains mnirs metadata, channels detected automatically. can specified explicitly shift amplitude can specified one either shifting signals new value, shifting signals fixed amplitude, given units NIRS signals. width span Shifting can performed mean value within window specified one either width span. width defines number samples around local index sample (idx), whereas span defines range time units time_channel around idx. e.g.¬†width = 1 shift single minimum sample, whereas span = 1 shift minimum mean value samples within one second. position Specifies want shift data; either shifting ‚Äúmin‚Äù, ‚Äúmax‚Äù, ‚Äúfirst‚Äù sample(s). data set, shift NIRS channels mean 2-minute baseline equal zero, give us change deoxygenation baseline incremental cycling protocol.  shifting, ending (minimum) values smo2_left smo2_right similar, starting baseline values different. Whereas shift baseline values zero, can see smo2_right signal smaller deoxygenation amplitude compared smo2_left signal. consider assumptions processing decisions influence interpretations; shifting starting values, normalising starting condition two tissue sites implicitly assuming baseline represents starting condition legs. may appropriate interested relative change (delta) leg intervention exposure (often referred \"‚àáSmO[2]\").","code":"## our default \"mnirs\" nirs_channel will be grouped together nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  ## to shift each nirs_channel separately, the channels should be un-grouped as.list(nirs_channels) #> [[1]] #> [1] \"smo2_right\" #>  #> [[2]] #> [1] \"smo2_left\"  data_shifted <- shift_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-grouped, as above     to = 0,                                 ## NIRS values will be shifted to zero     span = 120,                             ## shift the first 120 sec of data to zero     position = \"first\" )  plot(data_shifted, label_time = TRUE) +     geom_hline(yintercept = 0, linetype = \"dotted\")"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"rescale_mnirs","dir":"Articles","previous_headings":"","what":"rescale_mnirs()","title":"Reading and Cleaning Data with {mnirs}","text":"may want rescale data new dynamic range, changing units new amplitude. data function takes data frame, applies processing channels specified, returns processed data frame. mnirs metadata passed function. nirs_channels Channels can grouped providing list (e.g.¬†list(c(\"\", \"B\"), c(\"C\"))) channel rescaled common scale within group, separate scales groups. relative scaling channels preserved within group, lost across groups.nirs_channels specified explicitly ensure intended grouping structure defined. default mnirs metadata group NIRS channels together. range Specifies new dynamic range form c(min, max). example, want calibrate NIRS signals ‚Äòfunctional range‚Äô exercise task, may want rescale 0-100%.  , assumption maximal exercise task, minimum maximum values represent functional capacity tissue observed. normalise functional dynamic range leg. normalising way, differences smo2_left smo2_right appear less pronounced baselines shifted zero. interpretation may smo2_left appears start slightly higher percent ‚Äôs functional range, deoxygenates faster toward ‚Äôs minimum. smo2_right deoxygenates slightly slower work, reoxygenates slightly faster recovery.","code":"data_rescaled <- rescale_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-group `nirs_channels` to rescale each channel separately     range = c(0, 100)                       ## rescale to a 0-100% functional exercise range )  plot(data_rescaled, label_time = TRUE) +     geom_hline(yintercept = c(0, 100), linetype = \"dotted\")"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"pipe-friendly-combined-functions","dir":"Articles","previous_headings":"","what":"Pipe-friendly combined functions","title":"Reading and Cleaning Data with {mnirs}","text":"mnirs functions can piped together. entire pre-processing stage can easily performed sequential pipe. demonstrate , ‚Äôll read different example file recorded Train.Red FYER muscle oxygen sensor. also good time point use global mnirs.verbose argument silence warning & information messages familiar dataset. recommend leaving verbose = TRUE default whenever reading exploring new file.","code":"options(mnirs.verbose = FALSE)  read_mnirs(     example_mnirs(\"train.red\"),     nirs_channels = c(         smo2_left = \"SmO2 unfiltered\",         smo2_right = \"SmO2 unfiltered\"     ),     time_channel = c(time = \"Timestamp (seconds passed)\"),     zero_time = TRUE ) |>     resample_mnirs() |>     replace_mnirs(         invalid_above = 73,         outlier_cutoff = 3,         span = 7     ) |>     filter_mnirs(         method = \"butterworth\",         order = 2,         W = 0.01     ) |>     shift_mnirs(         nirs_channels = list(\"smo2_left\", \"smo2_right\"),         to = 0,         span = 60,         position = \"first\"     ) |>     rescale_mnirs(         nirs_channels = list(c(\"smo2_left\", \"smo2_right\")),         range = c(0, 100)     ) |>     plot(label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/articles/reading-mnirs-data.html","id":"signal-preparation","dir":"Articles","previous_headings":"","what":"‚úÖ Signal Preparation","title":"Reading and Cleaning Data with {mnirs}","text":"NIRS signal cleaned filtered, ready processing analysis. mnirs developed include functionality processing discrete intervals events, e.g.¬†reoxygenation kinetics, slope calculations post-occlusion microvascular responsiveness, critical oxygenation breakpoints.","code":""},{"path":"https://jemarnold.github.io/mnirs/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jem Arnold. Author, maintainer, copyright holder.","code":""},{"path":"https://jemarnold.github.io/mnirs/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Arnold J (2025). mnirs: Muscle Near-Infrared Spectroscopy Processing & Analysis. R package version 0.1.8, https://jemarnold.github.io/mnirs/.","code":"@Manual{,   title = {mnirs: Muscle Near-Infrared Spectroscopy Processing & Analysis},   author = {Jem Arnold},   year = {2025},   note = {R package version 0.1.8},   url = {https://jemarnold.github.io/mnirs/}, }"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"muscle-near-infrared-spectroscopy-mnirs","dir":"","previous_headings":"","what":"Muscle Near-Infrared Spectroscopy Processing & Analysis","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"{mnirs} package reading, processing, analysing data muscle near-infrared spectroscopy (mNIRS) devices.","code":""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"can install development version {mnirs} GitHub :","code":"# install.packages(\"remotes\") remotes::install_github(\"jemarnold/mnirs\")"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"<coming soon>","code":""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"online-app","dir":"","previous_headings":"","what":"Online App","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"basic implementation package hosted https://jem-arnold.shinyapps.io/mnirs/ can currently used reading pre-processing mNIRS data.","code":""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"detailed vignette common usage can found : Reading Cleaning Data {mnirs} [!NOTE] {mnirs} currently experimental development functionality may change! Stay updated development follow releases github.com/jemarnold/mnirs. {mnirs} designed process mNIRS data, can used read, clean, pre-process time series datasets, require many processing steps. Enjoy!","code":""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"read_mnirs-read-data-from-file","dir":"","previous_headings":"Usage","what":"read_mnirs() Read data from file","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"# remotes::install_github(\"jemarnold/mnirs\") ## install development version library(ggplot2) ## load for plotting library(mnirs)  ## {mnirs} includes sample files from a few mNIRS devices example_mnirs() #> [1] \"artinis_intervals.xlsx\"  \"moxy_intervals.csv\"      #> [3] \"moxy_ramp.xlsx\"          \"train.red_intervals.csv\"  ## partial matching will error if matches multiple try(example_mnirs(\"moxy\")) #> Error in example_mnirs(\"moxy\") : ‚úñ Multiple files match \"moxy\": #> ‚Ñπ Matching files: \"moxy_intervals.csv\" and \"moxy_ramp.xlsx\"  ## call an example mNIRS data file file_path <- example_mnirs(\"moxy_ramp\")   ## rename channels in the format `new_name1 = \"original_name1\"` ## where \"original_name1\" should match the file column name exactly data_table <- read_mnirs(     file_path,     nirs_channels = c(         smo2_right = \"SmO2 Live\",        ## identify and rename channels         smo2_left = \"SmO2 Live(2)\"     ),     time_channel = c(time = \"hh:mm:ss\"), ## date-time format will be converted to numeric     event_channel = NULL,                ## left blank, not currently used in analysis     sample_rate = NULL,                  ## sample_rate will be estimated from time column     add_timestamp = FALSE,               ## omit the date-time timestamp column     zero_time = TRUE,                    ## recalculate time values from zero     keep_all = FALSE,                    ## return only the specified data channels     verbose = TRUE                       ## show warnings & messages ) #> ! Estimated `sample_rate` = 2 Hz. #> ‚Ñπ Define `sample_rate` explicitly to override. #> Warning: ! Duplicate or irregular `time_channel` samples detected. #> ‚Ñπ Investigate at `time` = 211.99, 211.99, and 1184. #> ‚Ñπ Re-sample with `mnirs::resample_mnirs()`.  ## ignore the warning about repeated samples for now ‚òù ## Note that sample_rate was estimated correctly at 2 Hz  data_table #> # A tibble: 2,203 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1  0            54        68 #>  2  0.4          54        68 #>  3  0.96         54        68 #>  4  1.51         54        66 #>  5  2.06         54        66 #>  6  2.61         54        66 #>  7  3.16         54        66 #>  8  3.71         57        67 #>  9  4.26         57        67 #> 10  4.81         57        67 #> # ‚Ñπ 2,193 more rows  ## note the hidden plot option to display timestamp values as `hh:mm:ss` plot(data_table, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"metadata-stored-in-mnirs-data-frames","dir":"","previous_headings":"Usage","what":"Metadata stored in mnirs data frames","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"## view metadata (hiding item two which is just a list of row numbers) attributes(data_table)[-2] #> $class #> [1] \"mnirs\"      \"tbl_df\"     \"tbl\"        \"data.frame\" #>  #> $names #> [1] \"time\"       \"smo2_right\" \"smo2_left\"  #>  #> $nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  #>  #> $time_channel #> [1] \"time\" #>  #> $sample_rate #> [1] 2  ## define nirs_channels externally for later use (nirs_channels <- attr(data_table, \"nirs_channels\")) #> [1] \"smo2_right\" \"smo2_left\"  ## add nirs device to metadata data_table <- create_mnirs_data(data_table, nirs_device = \"Moxy\")  ## check that the added metadata is now present attr(data_table, \"nirs_device\") #> [1] \"Moxy\""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"replace_mnirs-replace-local-outliers-invalid-values-and-missing-values","dir":"","previous_headings":"Usage","what":"replace_mnirs: Replace local outliers, invalid values, and missing values","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"data_cleaned <- replace_mnirs(     data_table,     nirs_channels = NULL,       ## default to all nirs_channels in metadata     time_channel = NULL,        ## default to time_channel in metadata     invalid_values = 0,         ## known invalid values in the data     invalid_above = 90,     outlier_cutoff = 3,         ## recommended default value     width = 10,                 ## local window to detect local outliers and replace missing values     method = \"linear\"           ## linear interpolation over `NA`s )  plot(data_cleaned, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"resample_mnirs-resample-data","dir":"","previous_headings":"Usage","what":"resample_mnirs(): Resample data","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"data_resampled <- resample_mnirs(     data_cleaned,     # time_channel = NULL,        ## retrieved from metadata     # sample_rate = NULL,     # resample_rate = sample_rate ## the default will re-sample to sample_rate     method = \"linear\",            ## default linear interpolation across any new samples     verbose = TRUE                ## will confirm the output sample rate ) #> ‚Ñπ Output is resampled at 2 Hz.  ## note the altered \"time\" values üëá data_resampled #> # A tibble: 2,419 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1   0         54        68   #>  2   0.5       54        68   #>  3   1         54        67.9 #>  4   1.5       54        66.0 #>  5   2         54        66   #>  6   2.5       54        66   #>  7   3         54        66   #>  8   3.5       55.9      66.6 #>  9   4         57        67   #> 10   4.5       57        67   #> # ‚Ñπ 2,409 more rows"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"filter_mnirs-digital-filtering","dir":"","previous_headings":"Usage","what":"filter_mnirs(): Digital filtering","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"data_filtered <- filter_mnirs(     data_resampled,     # nirs_channel = NULL,  ## retrieved from metadata     # time_channel = NULL,     # sample_rate = NULLL,     method = \"butterworth\", ## Butterworth digital filter is a common choice     type = \"low\",           ## specify a low-pass filter     order = 2,              ## filter order number     W = 0.02                ## filter fractional critical frequency )  ## we will add the non-filtered data back to the plot to compare plot(data_filtered, label_time = TRUE) +     geom_line(         data = data_cleaned,          aes(y = smo2_left, colour = \"smo2_left\"), alpha = 0.4     ) +     geom_line(         data = data_cleaned,          aes(y = smo2_right, colour = \"smo2_right\"), alpha = 0.4     )"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"shift_mnirs--rescale_mnirs-shift-and-rescale-data","dir":"","previous_headings":"Usage","what":"shift_mnirs() & rescale_mnirs(): Shift and rescale data","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"## our default *mnirs* nirs_channel will be grouped together nirs_channels #> [1] \"smo2_right\" \"smo2_left\"  ## to shift each nirs_channel separately, the channels should be un-grouped as.list(nirs_channels) #> [[1]] #> [1] \"smo2_right\" #>  #> [[2]] #> [1] \"smo2_left\"  data_shifted <- shift_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-grouped, as above     to = 0,                                 ## NIRS values will be shifted to zero     span = 120,                             ## shift the first 120 sec of data to zero     position = \"first\" )  plot(data_shifted, label_time = TRUE) +     geom_hline(yintercept = 0, linetype = \"dotted\") data_rescaled <- rescale_mnirs(     data_filtered,     nirs_channels = as.list(nirs_channels), ## un-group `nirs_channels` to rescale each channel separately     range = c(0, 100)                       ## rescale to a 0-100% functional exercise range )  plot(data_rescaled, label_time = TRUE) +     geom_hline(yintercept = c(0, 100), linetype = \"dotted\")"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"pipe-friendly-combined-functions","dir":"","previous_headings":"Usage","what":"Pipe-friendly combined functions","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"","code":"options(mnirs.verbose = FALSE)  read_mnirs(     example_mnirs(\"train.red\"),     nirs_channels = c(         smo2_left = \"SmO2 unfiltered\",         smo2_right = \"SmO2 unfiltered\"     ),     time_channel = c(time = \"Timestamp (seconds passed)\"),     zero_time = TRUE ) |>     resample_mnirs() |>     replace_mnirs(         invalid_above = 73,         outlier_cutoff = 3,         span = 7     ) |>     filter_mnirs(         method = \"butterworth\",         order = 2,         W = 0.01     ) |>     shift_mnirs(         nirs_channels = list(\"smo2_left\", \"smo2_right\"),         to = 0,         span = 60,         position = \"first\"     ) |>     rescale_mnirs(         nirs_channels = list(c(\"smo2_left\", \"smo2_right\")),         range = c(0, 100)     ) |>     plot(label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"mnirs-device-compatibility","dir":"","previous_headings":"","what":"mNIRS Device Compatibility","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"package designed recognise mNIRS data exported .csv .xls(x) files. flexible use many different NIRS devices, compatibility improve continued development. Currently, tested successfully mNIRS data exported following devices apps: Artinis Oxysoft software (.csv .xlsx) Moxy direct export (.csv) PerfPro PC software (.xlsx) Train.Red app (.csv) VO2 Master Manager app (.xlsx)","code":""},{"path":"https://jemarnold.github.io/mnirs/index.html","id":"future-mnirs-development","dir":"","previous_headings":"","what":"Future {mnirs} Development","title":"Muscle Near-Infrared Spectroscopy Processing & Analysis","text":"Discrete interval processing Process oxygenation kinetics Monoexponential & sigmoidal curve fitting non-parametric kinetics & slope analysis Critical oxygenation breakpoint analysis Generative codebots used assist code optimisation. code thoroughly reviewed, revised, validated package author.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/artinis_intervals.xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"10 Hz Artinis Oxysoft export ‚Äî artinis_intervals.xlsx","title":"10 Hz Artinis Oxysoft export ‚Äî artinis_intervals.xlsx","text":"Exported Artinis Oxysoft, recorded Oxymon MKIII 50 Hz exported 10 Hz. Containing two 5-minute cycling work intervals ischaemic occlusion, placed vastus lateralis muscle site.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/artinis_intervals.xlsx.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"10 Hz Artinis Oxysoft export ‚Äî artinis_intervals.xlsx","text":".xlsx file header metadata four columns 20919 rows. nirs_channels = c(O2Hb = 2, HHb = 3) time_channel = c(sample = 1) event_channel = c(event = 4)","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/breaks_timespan.html","id":null,"dir":"Reference","previous_headings":"","what":"Breaks for timespan data ‚Äî breaks_timespan","title":"Breaks for timespan data ‚Äî breaks_timespan","text":"Pretty timespan breaks plotting units 5, 15, 30, 60 sec, etc. Modified scales::breaks_timespan().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/breaks_timespan.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Breaks for timespan data ‚Äî breaks_timespan","text":"","code":"breaks_timespan(unit = c(\"secs\", \"mins\", \"hours\", \"days\", \"weeks\"), n = 5)"},{"path":"https://jemarnold.github.io/mnirs/reference/breaks_timespan.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Breaks for timespan data ‚Äî breaks_timespan","text":"unit time unit used interpret numeric data input (defaults \"secs\"). n Desired number breaks. may get slightly fewer breaks requested.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/breaks_timespan.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Breaks for timespan data ‚Äî breaks_timespan","text":"Returns function generating breaks.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/breaks_timespan.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Breaks for timespan data ‚Äî breaks_timespan","text":"","code":"library(ggplot2) x = 0:120 y = sin(2 * pi * x / 15) + rnorm(length(x), 0, 0.2)  ggplot(data.frame(x, y)) +     aes(x = x, y = y) +     theme_mnirs() +     scale_x_continuous(breaks = breaks_timespan()) +     geom_line()"},{"path":"https://jemarnold.github.io/mnirs/reference/clean_invalid.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardise invalid to NA values and round numeric to avoid float precision error ‚Äî clean_invalid","title":"Standardise invalid to NA values and round numeric to avoid float precision error ‚Äî clean_invalid","text":"Standardise invalid NA values round numeric avoid float precision error","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/clean_invalid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardise invalid to NA values and round numeric to avoid float precision error ‚Äî clean_invalid","text":"","code":"clean_invalid(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":null,"dir":"Reference","previous_headings":"","what":"Computes vectorised rolling local values ‚Äî compute_local_windows","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"compute_local_windows(): Helper function return list rolling sample indices idx along time variable t, defined either width samples span units t. compute_local_fun(): Helper function return vector local values calculated x function fn within list rolling sample windows. compute_outliers(): Helper function return vector logicals indicating local outliers x within list rolling sample windows window_idx. compute_window_of_valid_neighbours(): Helper function return list sample indices idx along valid values x either side NAs, defined either width samples span units t.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"","code":"compute_local_windows(   t,   idx = seq_along(t),   width = NULL,   span = NULL,   verbose = TRUE )  compute_local_fun(x, window_idx, fn)  compute_outliers(x, window_idx, local_medians, outlier_cutoff)  compute_window_of_valid_neighbours(   x,   t = seq_along(x),   width = NULL,   span = NULL,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"t optional numeric vector time sample number. idx numeric vector indices t calculate local windows. indices t default, can used calculate known indicies, invalid values x. width integer defining local window number samples around idx perform operation., [idx - floor(width/2), idx + floor(width/2)]. span numeric value defining local window timespan around idx perform operation. units time_channel t, [t - span/2, t + span/2]. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting. x numeric vector. window_idx list length window_idx shorter length x numeric vectors sample indices local rolling windows. fn function pass local rolling calculation. Currently used functions c(median, mean). local_medians numeric vector length x local median values. outlier_cutoff integer local outlier threshold, number standard deviations local median. default outlier_cutoff = NULL replace outliers. outlier_cutoff = 3 standard replacement threshold following Pearson's rule.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"compute_local_windows(): list length idx shorter length t numeric vectors sample indices length width samples span units time t. compute_local_fun(): numeric vector length x. compute_outliers(): logical vector length x. compute_window_of_valid_neighbours(): list length NA values x numeric vectors sample indices length width samples span units time t valid values neighbouring split either side invalid NAs.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"Local rolling calculations made within window defined either width number samples centred idx [idx - floor(width/2), idx + floor(width/2)], span timespan units time_channel centred idx [t - span/2, t + span/2]. partial moving average calculated edges data.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/compute_helpers.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Computes vectorised rolling local values ‚Äî compute_local_windows","text":"","code":"x <- c(1, 2, 3, 100, 5) t <- seq_along(x)  ## a list of numeric vectors of rolling local windows along `t` (window_idx <- mnirs:::compute_local_windows(t, width = 2, span = NULL)) #> [[1]] #> [1] 1 2 #>  #> [[2]] #> [1] 1 2 3 #>  #> [[3]] #> [1] 2 3 4 #>  #> [[4]] #> [1] 3 4 5 #>  #> [[5]] #> [1] 4 5 #>   ## a numeric vector of local medians of `x` (local_medians <- mnirs:::compute_local_fun(x, window_idx, median)) #> [1]  1.5  2.0  3.0  5.0 52.5  ## a logical vector of local outliers of `x` (is.outlier <- mnirs:::compute_outliers(x, window_idx, local_medians, outlier_cutoff = 3)) #> [1] FALSE FALSE FALSE  TRUE FALSE  ## a list of numeric vectors of local windows of valid values of `x` neighbouring `NA`s. x <- c(1, 2, 3, NA, NA, 6) (window_idx <- mnirs:::compute_window_of_valid_neighbours(x, width = 2)) #> [[1]] #> [1] 3 6 #>  #> [[2]] #> [1] 3 6 #>   (local_medians <- mnirs:::compute_local_fun(x, window_idx, median)) #> [1] 4.5 4.5  x[is.na(x)] <- local_medians x #> [1] 1.0 2.0 3.0 4.5 4.5 6.0"},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"Manually add class \"mnirs\" metadata existing data frame.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"","code":"create_mnirs_data(data, ...)"},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"data data frame existing metadata (attributes(data)). ... Additional arguments metadata add data frame. Can either seperate named arguments list named values. nirs_device nirs_channels time_channel event_channel sample_rate","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"Typically called internally, can used inject mnirs metadata data frame.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/create_mnirs_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an mnirs data frame with metadata ‚Äî create_mnirs_data","text":"","code":"df <- data.frame(     A = 1:3,     B = seq(10, 30, 10),     C = seq(11, 33, 11) )  attributes(df) #> $names #> [1] \"A\" \"B\" \"C\" #>  #> $class #> [1] \"data.frame\" #>  #> $row.names #> [1] 1 2 3 #>   ## inject metadata nirs_data <- create_mnirs_data(     df,     nirs_channels = c(\"B\", \"C\"),     time_channel = \"A\",     sample_rate = 1 )  attributes(nirs_data) #> $class #> [1] \"mnirs\"      \"tbl_df\"     \"tbl\"        \"data.frame\" #>  #> $row.names #> [1] 1 2 3 #>  #> $names #> [1] \"A\" \"B\" \"C\" #>  #> $nirs_channels #> [1] \"B\" \"C\" #>  #> $time_channel #> [1] \"A\" #>  #> $sample_rate #> [1] 1 #>"},{"path":"https://jemarnold.github.io/mnirs/reference/detect_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect event indices ‚Äî detect_events","title":"Detect event indices ‚Äî detect_events","text":"Detect event indices","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/detect_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect event indices ‚Äî detect_events","text":"","code":"detect_events(   time_vec,   event_vec,   event_times,   event_labels,   event_samples,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/detect_irregular_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Report warnings for unbalanced time_channel samples ‚Äî detect_irregular_samples","title":"Report warnings for unbalanced time_channel samples ‚Äî detect_irregular_samples","text":"Report warnings unbalanced time_channel samples","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/detect_irregular_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Report warnings for unbalanced time_channel samples ‚Äî detect_irregular_samples","text":"","code":"detect_irregular_samples(x, time_channel, verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/detect_mnirs_device.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect mnirs device from file metadata ‚Äî detect_mnirs_device","title":"Detect mnirs device from file metadata ‚Äî detect_mnirs_device","text":"Detect mnirs device file metadata","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/detect_mnirs_device.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect mnirs device from file metadata ‚Äî detect_mnirs_device","text":"","code":"detect_mnirs_device(data)"},{"path":"https://jemarnold.github.io/mnirs/reference/detect_time_channel.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect time_channel from header row ‚Äî detect_time_channel","title":"Detect time_channel from header row ‚Äî detect_time_channel","text":"Detect time_channel header row","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/detect_time_channel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect time_channel from header row ‚Äî detect_time_channel","text":"","code":"detect_time_channel(   data,   time_channel = NULL,   nirs_device = NULL,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/ensemble_intervals.html","id":null,"dir":"Reference","previous_headings":"","what":"Ensemble average multiple intervals ‚Äî ensemble_intervals","title":"Ensemble average multiple intervals ‚Äî ensemble_intervals","text":"Ensemble average multiple intervals","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/ensemble_intervals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ensemble average multiple intervals ‚Äî ensemble_intervals","text":"","code":"ensemble_intervals(interval_list, nirs_channels, metadata, verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/example_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Get path to mnirs example files ‚Äî example_mnirs","title":"Get path to mnirs example files ‚Äî example_mnirs","text":"Get path mnirs example files","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/example_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get path to mnirs example files ‚Äî example_mnirs","text":"","code":"example_mnirs(file = NULL)"},{"path":"https://jemarnold.github.io/mnirs/reference/example_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get path to mnirs example files ‚Äî example_mnirs","text":"file Name file character string. NULL, returns vector available file names.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/example_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get path to mnirs example files ‚Äî example_mnirs","text":"file path character string selected example files stored package.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/example_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get path to mnirs example files ‚Äî example_mnirs","text":"","code":"## lists all files example_mnirs() #> [1] \"artinis_intervals.xlsx\"  \"moxy_intervals.csv\"      #> [3] \"moxy_ramp.xlsx\"          \"train.red_intervals.csv\"  ## partial matching will error if matches multiple try(example_mnirs(\"moxy\")) #> Error in example_mnirs(\"moxy\") :  #>   ‚úñ Multiple files match \"moxy\": #> ‚Ñπ Matching files: \"moxy_intervals.csv\" and \"moxy_ramp.xlsx\"  example_mnirs(\"moxy_ramp\") #> [1] \"/home/runner/work/_temp/Library/mnirs/extdata/moxy_ramp.xlsx\""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_interval_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract interval data by index ‚Äî extract_interval_list","title":"Extract interval data by index ‚Äî extract_interval_list","text":"Extract interval data index","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_interval_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract interval data by index ‚Äî extract_interval_list","text":"","code":"extract_interval_list(data, interval_spec, nirs_channels)"},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract intervals from mnirs data ‚Äî extract_intervals","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"Detects extracts intervals around specified events time series data analysis.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"","code":"extract_intervals(   data,   nirs_channels = list(NULL),   time_channel = NULL,   event_channel = NULL,   sample_rate = NULL,   event_times = NULL,   event_labels = NULL,   event_samples = NULL,   span = list(c(-30, 180)),   group_events = list(\"distinct\", \"ensemble\"),   zero_time = FALSE,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"data data frame class \"mnirs\" containing time series data metadata. nirs_channels list() character vectors indicating mNIRS channel names operate within interval (see Details). Must match column names data exactly. Retrieved metadata defined explicitly. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. event_channel optional character string indicating event lap channel name. Required event_labels specified. Must match column names data exactly. Retrieved metadata defined explicitly. sample_rate optional numeric value exported sample rate Hz. defined explicitly, estimated data (see Details). event_times numeric vector time_channel values indicating event starts (see Details). event_labels character vector strings match event_channel, indicating event starts. event_samples integer vector sample indices (row numbers) indicating event starts. span list() two-element numeric vectors specifying interval around event c(, ), units time_channel (see Details). group_events Either character string list() numeric vectors specifying group intervals. Interval numbers sorted order appearance within data. \"distinct\" extract interval independent data frame (default). \"ensemble\" perform ensemble-averaging across detected intervals nirs_channel, return single data frame. list(c(1, 2), c(3, 4)) perform ensemble-averaging across intervals within group return data frame group. zero_time logical re-calculate time_channel zero preserve original time_channel values (FALSE, default). verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"named list() tibbles class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"nirs_channels = list() can used specify unique data channels (column names) operate within intervals, according group_events (see ). Channels can specified seperate list items (e.g. list(c(\"\", \"B\", \"C\"), \"B\", c(\"\", \"C\"))) include exclude specific intervals. way, bad data channels single interval can excluded contaminating ensemble-averaging. event_* arguments can used identify intervals interest data, can specified three ways (methods can combined): event_times Numeric time values units time_channel. event_samples Integer sample indices (row numbers). event_labels Character patterns match event_channel, case-sensitive must match exactly. Every unique event detected data extracted according span interval window around (see ). Events can specified order. detected intervals extracted returned order appear. span = list() accept two-element numeric vectors indicating interval time window around detected event, units time_channel, e.g. seconds. span = c(, ) typically negative value, extending interval window target event, positive value, extending interval window target event, resulting interval window [event - span[1], event + span[2]]. However, span accept positive negative values reference target event, long range contained within bounds available data. Example three intervals: event_times = list(60, 120, 300)  span = list(c(-30, 30), c(30, 90), c(-60, 0)) Interval 1 range 30 90 seconds. Interval 2 range 150 210 seconds. Interval 3 range 240 300 seconds. group_events = list() can used specify grouping structure intervals return either discrete ensemble-averaged intervals. \"distinct\" extract interval independent data frame. \"ensemble\" perform ensemble-averaging across detected intervals nirs_channel, return single data frame. list(c(1, 2), c(3, 4)) perform ensemble-averaging across intervals within group return data frame group. interval numbers omitted group_events extracted distinct data frame. Interval numbers beyond number detected intervals ignored. group_events accept named list pass names list returned data frames <development>, e.g. group_events = list(low = c(1, 2), high = c(3, 4))  Otherwise, default names returned \"interval_1\", \"interval_2\", etc. distinct intervals; \"ensemble\" ensemble-averaging across intervals; \"group_1_2\" etc. custom grouping structure. List items single vector (e.g. nirs_channels = list(c(\"\", \"B\")) span = c(-30, 30)) recycled forward intervals. number intervals detected exceeds number list items, last specified list item recycled forward additional intervals. List items beyond number detected intervals ignored. zero_time = TRUE re-calculate numeric time_channel values start zero target event, interval. Ensemble- averaged interval times always zeroed. Effectively, works best event marker indicates start interval. can return unexpected time values event marker included interval range (e.g. span = c(30, 60)).","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_intervals.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract intervals from mnirs data ‚Äî extract_intervals","text":"","code":"library(ggplot2)  options(mnirs.verbose = FALSE)  ## read example data data <- read_mnirs(     example_mnirs(\"train.red\"),     nirs_channels = c(         smo2_left = \"SmO2 unfiltered\",         smo2_right = \"SmO2 unfiltered\"     ),     time_channel = c(time = \"Timestamp (seconds passed)\"),     zero_time = TRUE ) |>     resample_mnirs() |>     filter_mnirs(         method = \"butterworth\",         order = 2,         W = 0.01     )  ## specify intervals to extract by time values extract_intervals(     data,     # nirs_channels = NULL,               ## retrieved from metadata     # time_channel = NULL,     # sample_rate = NULL,     event_times = c(368, 1093),           ## specify a series of intervals     span = list(c(-20, 120), c(-20, 90)), ## specify the event timespans     group_events = \"distinct\",            ## return all discrete intervals     zero_time = TRUE                      ## re-calculate interval times to start from zero ) #> $interval_1 #> # A tibble: 1,401 √ó 3 #>     time smo2_left smo2_right #>    <dbl>     <dbl>      <dbl> #>  1 -20        56.3       60.4 #>  2 -19.9      56.3       60.4 #>  3 -19.8      56.3       60.4 #>  4 -19.7      56.3       60.4 #>  5 -19.6      56.3       60.4 #>  6 -19.5      56.3       60.4 #>  7 -19.4      56.3       60.4 #>  8 -19.3      56.3       60.5 #>  9 -19.2      56.3       60.5 #> 10 -19.1      56.3       60.5 #> # ‚Ñπ 1,391 more rows #>  #> $interval_2 #> # A tibble: 1,101 √ó 3 #>     time smo2_left smo2_right #>    <dbl>     <dbl>      <dbl> #>  1 -20        56.4       57.4 #>  2 -19.9      56.4       57.4 #>  3 -19.8      56.4       57.4 #>  4 -19.7      56.4       57.4 #>  5 -19.6      56.4       57.4 #>  6 -19.5      56.4       57.4 #>  7 -19.4      56.4       57.4 #>  8 -19.3      56.4       57.4 #>  9 -19.2      56.4       57.4 #> 10 -19.1      56.4       57.4 #> # ‚Ñπ 1,091 more rows #>"},{"path":"https://jemarnold.github.io/mnirs/reference/extract_oxysoft_rate.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Oxysoft sample rate ‚Äî extract_oxysoft_rate","title":"Extract Oxysoft sample rate ‚Äî extract_oxysoft_rate","text":"Extract Oxysoft sample rate","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/extract_oxysoft_rate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Oxysoft sample rate ‚Äî extract_oxysoft_rate","text":"","code":"extract_oxysoft_rate(file_header, sample_rate = NULL)"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Butterworth digital filter ‚Äî filter_butter","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"Apply Butterworth digital filter vector data signal::butter() signal::filtfilt() handles 'edges' better start end data.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"","code":"filter_butter(   x,   order = 1,   W,   type = c(\"low\", \"high\", \"stop\", \"pass\"),   edges = c(\"rev\", \"rep1\", \"none\"),   na.rm = FALSE )"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"x numeric vector. order integer defining filter order method = \"butterworth\" (default order = 1). W one- two-element numeric vector defining filter cutoff frequency(ies) method = \"butterworth\", fraction Nyquist frequency (see Details). type character string indicating digital filter type method = \"butterworth\" (see Details). \"low\" low-pass filter (default). \"high\" high-pass filter. \"stop\" stop-band (band-reject) filter. \"pass\" pass-band filter. edges character string indicating pad x edge detection. \"rev\" (default) pad x preceding 5% data reverse sequence. \"rep1\" pad x repeating last preceding value. \"none\" return unpadded signal::filtfilt() output. na.rm logical indicating whether missing values preserved passed filter (TRUE). Otherwise FALSE (default) throw error NAs (see Details).","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"numeric vector length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"Applies centred (two-pass symmetrical) Butterworth digital filter signal::butter() signal::filtfilt(). Filter type defines desired signal frequencies either passed rejected output signal. Low-pass high-pass filters allow frequencies lower higher cutoff frequency W passed output signal, respectively. Stop-band defines critical range frequencies rejected output signal. Pass-band defines critical range frequencies passed output signal. filter order (number passes) defined order, typically range order = [1, 10]. Higher filter order tends capture rapid changes amplitude, also causes distortion around change points signal. General advice use lowest filter order sufficiently captures desired rapid responses data. critical (cutoff) frequency defined W, numeric value low-pass high-pass filters, two-element vector c(low, high) defining lower upper bands stop-band pass-band filters. W represents desired fractional cutoff frequency range W = [0, 1], 1 Nyquist frequency, .e., half sample rate data Hz. Missing values (NA) x cause error unless na.rm = TRUE. NAs preserved passed returned vector.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/filter_butter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a Butterworth digital filter ‚Äî filter_butter","text":"","code":"library(ggplot2)  set.seed(13) sin <- sin(2 * pi * 1:150 / 50) * 20 + 40 noise <- rnorm(150, mean = 0, sd = 6) noisy_sin <- sin + noise filt_without_edge <- filter_butter(x = noisy_sin, order = 2, W = 0.1, edges = \"none\") filt_with_edge <- filter_butter(x = noisy_sin, order = 2, W = 0.1, edges = \"rep1\")  ggplot(data.frame(), aes(x = seq_along(noise))) +     theme_mnirs() +     scale_colour_mnirs(name = NULL) +     geom_line(aes(y = noisy_sin)) +     geom_line(aes(y = filt_without_edge, colour = \"filt_without_edge\")) +     geom_line(aes(y = filt_with_edge, colour = \"filt_with_edge\"))"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter a data frame ‚Äî filter_mnirs","title":"Filter a data frame ‚Äî filter_mnirs","text":"Apply digital filtering/smoothing numeric vector data within data frame using either: cubic smoothing spline. Butterworth digital filter. simple moving average.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter a data frame ‚Äî filter_mnirs","text":"","code":"filter_mnirs(   data,   nirs_channels = NULL,   time_channel = NULL,   sample_rate = NULL,   method = c(\"smooth_spline\", \"butterworth\", \"moving_average\"),   spar = NULL,   type = c(\"low\", \"high\", \"stop\", \"pass\"),   order = 1,   W = NULL,   fc = NULL,   width = NULL,   span = NULL,   na.rm = FALSE,   verbose = TRUE,   ... )"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter a data frame ‚Äî filter_mnirs","text":"data data frame class \"mnirs\" containing time series data metadata. nirs_channels character vector mNIRS channel names operate . Must match column names data exactly. Retrieved metadata defined explicitly. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. sample_rate numeric value sample rate Hz method = \"butterworth\". taken metadata estimated time_channel defined explicitly. method character string indicating filter data (see Details). \"smooth_spline\" Fits cubic smoothing spline. \"butterworth\" Uses centred Butterworth digital filter. type must defined (see Details). \"moving_average\" Uses centred moving average filter. spar numeric value defining smoothing parameter method = \"smooth_spline\". type character string indicating digital filter type method = \"butterworth\" (see Details). \"low\" low-pass filter (default). \"high\" high-pass filter. \"stop\" stop-band (band-reject) filter. \"pass\" pass-band filter. order integer defining filter order method = \"butterworth\" (default order = 1). W one- two-element numeric vector defining filter cutoff frequency(ies) method = \"butterworth\", fraction Nyquist frequency (see Details). fc one- two-element numeric vector defining filter cutoff frequency(ies) method = \"butterworth\", Hz (see Details). width integer defining local window number samples around idx perform operation method = \"moving_average\". [idx - floor(width/2), idx + floor(width/2)]. span numeric value defining local window timespan around idx perform operation method = \"moving_average\". units time_channel t, [t - span/2, t + span/2]. na.rm logical indicating whether missing values preserved passed filter (TRUE). Otherwise FALSE (default) throw error NAs (see Details). verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting. ... Additional arguments.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter a data frame ‚Äî filter_mnirs","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Filter a data frame ‚Äî filter_mnirs","text":"method = \"smooth_spline\" Applies non-parametric cubic smoothing spline stats::smooth.spline(). Smoothing defined parameter spar, can left NULL automatically determined via penalised log liklihood. usually works well smoothing responses occurring order minutes longer. spar can defined explicitly, typically (necessarily) range spar = [0, 1]. method = \"butterworth\" Applies centred (two-pass symmetrical) Butterworth digital filter signal::butter() signal::filtfilt(). Filter type defines desired signal frequencies either passed rejected output signal. Low-pass high-pass filters allow frequencies lower higher cutoff frequency W passed output signal, respectively. Stop-band defines critical range frequencies rejected output signal. Pass-band defines critical range frequencies passed output signal. filter order (number passes) defined order, typically range order = [1, 10]. Higher filter order tends capture rapid changes amplitude, also causes distortion around change points signal. General advice use lowest filter order sufficiently captures desired rapid responses data. critical (cutoff) frequency defined W, numeric value low-pass high-pass filters, two-element vector c(low, high) defining lower upper bands stop-band pass-band filters. W represents desired fractional cutoff frequency range W = [0, 1], 1 Nyquist frequency, .e., half sample rate data Hz. Alternatively, cutoff frequency can defined fc sample_rate together. fc represents desired cutoff frequency Hz, sample_rate sample rate recorded data Hz. W = fc / (sample_rate / 2). one either W fc defined. defined, W preferred fc. method = \"moving_average\" Applies centred (symmetrical) moving average filter local window, defined either width number samples around idx [idx - floor(width/2), idx + floor(width/2)]. span timespan units time_channel [t - span/2, t + span/2]. partial moving average calculated edges data. Missing values (NA) nirs_channels cause error method = \"smooth_spline\" \"butterworth\", unless na.rm = TRUE. NAs preserved passed returned data.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter a data frame ‚Äî filter_mnirs","text":"","code":"library(ggplot2)  ## read example data data <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2 = \"SmO2 Live\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE ) |>     replace_mnirs(         invalid_values = c(0, 100),         outlier_cutoff = 3,         width = 10,         verbose = FALSE     )  data_filtered <- filter_mnirs(     data,     # nirs_channel = NULL,  ## retrieved from metadata     # time_channel = NULL,     # sample_rate = NULL,     method = \"butterworth\", ## Butterworth digital filter is a common choice     type = \"low\",           ## specify a low-pass filter     order = 2,              ## filter order number     W = 0.02,               ## filter fractional critical frequency     verbose = FALSE )  ## add the non-filtered data back to the plot to compare plot(data_filtered, label_time = TRUE) +     geom_line(         data = data,         aes(y = smo2, colour = \"smo2\"), alpha = 0.4     )"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a moving average filter ‚Äî filter_moving_average","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"Apply simple moving average smoothing filter vector data","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"","code":"filter_moving_average(   x,   t = seq_along(x),   width = NULL,   span = NULL,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"x numeric vector. t optional numeric vector time sample number. width integer defining local window number samples around idx perform operation., [idx - floor(width/2), idx + floor(width/2)]. span numeric value defining local window timespan around idx perform operation. units time_channel t, [t - span/2, t + span/2]. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"numeric vector length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"Applies centred (symmetrical) moving average filter local window defined either width number samples around idx [idx - floor(width/2), idx + floor(width/2)]. span timespan units time_channel [t - span/2, t + span/2]. valid values within calculation window, return NA. partial moving average calculated edges data.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/filter_moving_average.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a moving average filter ‚Äî filter_moving_average","text":"","code":"## basic moving average with sample width x <- c(1, 3, 2, 5, 4, 6, 5, 7) filter_moving_average(x, width = 3) #> [1] 2.000000 2.000000 3.333333 3.666667 5.000000 5.000000 6.000000 6.000000  ## with explicit time vector t <- c(0, 1, 2, 3, 4, 5, 6, 7) filter_moving_average(x, t, width = 2) #> [1] 2.000000 2.000000 3.333333 3.666667 5.000000 5.000000 6.000000 6.000000  ## using timespan instead of sample width filter_moving_average(x, span = 2) #> [1] 2.000000 2.000000 3.333333 3.666667 5.000000 5.000000 6.000000 6.000000"},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":null,"dir":"Reference","previous_headings":"","what":"Format timespan data as h:mm:ss ‚Äî format_hmmss","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"Convert numeric timespan data h:mm:ss format pretty plotting. Inspired ggplot2::scale_x_time().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"","code":"format_hmmss(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"x numeric vector.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"character vector length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"values less 3600 (1 hour), format returned mm:ss. value greater 3600, format returned h:mm:ss leading zeroes.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/format_hmmss.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format timespan data as h:mm:ss ‚Äî format_hmmss","text":"","code":"library(ggplot2)  x = 0:120 y = sin(2 * pi * x / 15) + rnorm(length(x), 0, 0.2)  ggplot(data.frame(x, y)) +     aes(x = x, y = y) +     theme_mnirs() +     scale_x_continuous(         breaks = breaks_timespan(),         labels = format_hmmss     ) +     geom_line()"},{"path":"https://jemarnold.github.io/mnirs/reference/group_intervals.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply grouping to intervals ‚Äî group_intervals","title":"Apply grouping to intervals ‚Äî group_intervals","text":"Apply grouping intervals","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/group_intervals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply grouping to intervals ‚Äî group_intervals","text":"","code":"group_intervals(   interval_list,   nirs_channels,   metadata,   group_events,   zero_time = TRUE,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/is_empty.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect empty or NA strings ‚Äî is_empty","title":"Detect empty or NA strings ‚Äî is_empty","text":"Detect empty NA strings","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/is_empty.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect empty or NA strings ‚Äî is_empty","text":"","code":"is_empty(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/make_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate if an item is a list ‚Äî make_list","title":"Validate if an item is a list ‚Äî make_list","text":"Validate item list","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/make_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate if an item is a list ‚Äî make_list","text":"","code":"make_list(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/mnirs-package.html","id":null,"dir":"Reference","previous_headings":"","what":"mnirs: Muscle Near-Infrared Spectroscopy Processing & Analysis ‚Äî mnirs-package","title":"mnirs: Muscle Near-Infrared Spectroscopy Processing & Analysis ‚Äî mnirs-package","text":"Methods reading, processing, analysing data muscle near-infrared spectroscopy (mNIRS) devices.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/mnirs-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"mnirs: Muscle Near-Infrared Spectroscopy Processing & Analysis ‚Äî mnirs-package","text":"Maintainer: Jem Arnold jem.arnold@ubc.ca (ORCID) [copyright holder]","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/moxy_intervals.csv.html","id":null,"dir":"Reference","previous_headings":"","what":"0.5 Hz Moxy onboard export ‚Äî moxy_intervals.csv","title":"0.5 Hz Moxy onboard export ‚Äî moxy_intervals.csv","text":"Exported Moxy onboard recording 0.5 Hz smoothing. Containing four 5-minute cycling work intervals, placed vastus lateralis muscle site.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/moxy_intervals.csv.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"0.5 Hz Moxy onboard export ‚Äî moxy_intervals.csv","text":".csv file seven columns 974 rows. nirs_channels = c(\"SmO2 Live\", \"SmO2 Averaged\", \"THb\") time_channel = c(\"hh:mm:ss\")","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/moxy_ramp.xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"2 Hz PerfPro export of Moxy data ‚Äî moxy_ramp.xlsx","title":"2 Hz PerfPro export of Moxy data ‚Äî moxy_ramp.xlsx","text":"Exported PerfPro Studio software, recorded 0.5 Hz smoothing exported 2 Hz. Containing ramp incremental cycling protocol, placed bilateral vastus lateralis muscle sites. data errors (outliers, invalid data, missing NA values) introduced demonstrate mnirs package functionality.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/moxy_ramp.xlsx.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"2 Hz PerfPro export of Moxy data ‚Äî moxy_ramp.xlsx","text":".xlsx file six columns 2203 rows. nirs_channels = c(\"SmO2 Live\", \"SmO2 Live(2)\") time_channel = c(\"hh:mm:ss\") event_channel = c(\"Lap\") event_times = c(870)","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/name_channels.html","id":null,"dir":"Reference","previous_headings":"","what":"Force names on character strings ‚Äî name_channels","title":"Force names on character strings ‚Äî name_channels","text":"Force names character strings","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/name_channels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Force names on character strings ‚Äî name_channels","text":"","code":"name_channels(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/palette_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom mnirs colour palette ‚Äî palette_mnirs","title":"Custom mnirs colour palette ‚Äî palette_mnirs","text":"Custom mnirs colour palette","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/palette_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom mnirs colour palette ‚Äî palette_mnirs","text":"","code":"palette_mnirs(n = NULL, names = NULL)"},{"path":"https://jemarnold.github.io/mnirs/reference/palette_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Custom mnirs colour palette ‚Äî palette_mnirs","text":"n numeric vector specifying number colours return. names character vector specifying colour names return.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/palette_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Custom mnirs colour palette ‚Äî palette_mnirs","text":"Named unnamed character vector hex colours.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/palette_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Custom mnirs colour palette ‚Äî palette_mnirs","text":"","code":"scales::show_col(palette_mnirs())  scales::show_col(palette_mnirs(n = 2))  scales::show_col(palette_mnirs(names = c(\"red\", \"orange\")))"},{"path":"https://jemarnold.github.io/mnirs/reference/parse_sample_rate.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate and Estimate Sample Rate ‚Äî parse_sample_rate","title":"Validate and Estimate Sample Rate ‚Äî parse_sample_rate","text":"Validate Estimate Sample Rate","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/parse_sample_rate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate and Estimate Sample Rate ‚Äî parse_sample_rate","text":"","code":"parse_sample_rate(   data,   file_header,   time_channel,   sample_rate = NULL,   nirs_device = NULL,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/parse_time_channel.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse time_channel character or dttm to numeric ‚Äî parse_time_channel","title":"Parse time_channel character or dttm to numeric ‚Äî parse_time_channel","text":"Parse time_channel character dttm numeric","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/parse_time_channel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse time_channel character or dttm to numeric ‚Äî parse_time_channel","text":"","code":"parse_time_channel(   data,   time_channel,   add_timestamp = FALSE,   zero_time = FALSE )"},{"path":"https://jemarnold.github.io/mnirs/reference/plot.mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot mnirs objects ‚Äî plot.mnirs","title":"Plot mnirs objects ‚Äî plot.mnirs","text":"Create simple plot objects returned create_mnirs_data().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/plot.mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot mnirs objects ‚Äî plot.mnirs","text":"","code":"# S3 method for class 'mnirs' plot(x, ...)"},{"path":"https://jemarnold.github.io/mnirs/reference/plot.mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot mnirs objects ‚Äî plot.mnirs","text":"x Object class \"mnirs\" returned create_mnirs_data() ... Additional arguments: na.omit logical omit missing (NA) values better display connected lines. na.omit = FALSE (default) can used identify missing values. label_time logical display x-axis time values formatted \"hh:mm:ss\" using scales::label_time(). label_time = FALSE (default) display simple numeric values x-axis. n numeric value define number breaks x- y-axes.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/plot.mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot mnirs objects ‚Äî plot.mnirs","text":"ggplot2 object.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/plot.mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot mnirs objects ‚Äî plot.mnirs","text":"","code":"## call an example *{mnirs}* data file file_path <- example_mnirs(\"moxy_ramp\")  data_table <- read_mnirs(     file_path,     nirs_channels = c(smo2_right = \"SmO2 Live\",                       smo2_left = \"SmO2 Live(2)\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE )  ## note the hidden plot option to display time values as `hh:mm:ss` plot(data_table, label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/preserve_na.html","id":null,"dir":"Reference","previous_headings":"","what":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","title":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","text":"preserve_na() stores NA vector positions extracts valid non-NA values later restoration restore_na(). restore_na() restores NA values original vector positions processing valid non-NA values returned preserve_na().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/preserve_na.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","text":"","code":"preserve_na(x)  restore_na(y, na_info)"},{"path":"https://jemarnold.github.io/mnirs/reference/preserve_na.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","text":"x vector containing missing NA values. y vector valid non-NA values returned preserve_na(). na_info list returned preserve_na().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/preserve_na.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","text":"preserve_na() returns list na_info components: na_info$x_valid: vector NA values removed. na_info$x_length: numeric value original input vector length. na_info$na_idx: logical vector preserving NA positions. restore_na() returns vector y length original input vector x NA values restored original positions.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/preserve_na.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Preserve and Restore NA Information Within a Vector ‚Äî preserve_na","text":"","code":"x <- c(1, NA, 3, NA, 5) (na_info <- mnirs:::preserve_na(x))#' #> $x_valid #> [1] 1 3 5 #>  #> $x_length #> [1] 5 #>  #> $na_idx #> [1] FALSE  TRUE FALSE  TRUE FALSE #>   ## process with a function that would normally fail on NA y <- na_info$x_valid * 2 (result <- mnirs:::restore_na(y, na_info)) #> [1]  2 NA  6 NA 10  x <- c(\"A\", \"B\", \"C\", NA, NA) (na_info <- mnirs:::preserve_na(x)) #> $x_valid #> [1] \"A\" \"B\" \"C\" #>  #> $x_length #> [1] 5 #>  #> $na_idx #> [1] FALSE FALSE FALSE  TRUE  TRUE #>   ## process with a function that would normally fail on NA y <- tolower(na_info$x_valid) (result <- mnirs:::restore_na(y, na_info)) #> [1] \"a\" \"b\" \"c\" NA  NA"},{"path":"https://jemarnold.github.io/mnirs/reference/read_data_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Read data table from raw data ‚Äî read_data_table","title":"Read data table from raw data ‚Äî read_data_table","text":"Read data table raw data","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_data_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read data table from raw data ‚Äî read_data_table","text":"","code":"read_data_table(data, nirs_channels, time_channel = NULL, event_channel = NULL)"},{"path":"https://jemarnold.github.io/mnirs/reference/read_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Read raw data frame from file path ‚Äî read_file","title":"Read raw data frame from file path ‚Äî read_file","text":"Read raw data frame file path","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read raw data frame from file path ‚Äî read_file","text":"","code":"read_file(file_path)"},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Read mnirs data from file ‚Äî read_mnirs","title":"Read mnirs data from file ‚Äî read_mnirs","text":"Read files exported commercially available mNIRS devices return data frame class \"mnirs\" recorded time series data metadata.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read mnirs data from file ‚Äî read_mnirs","text":"","code":"read_mnirs(   file_path,   nirs_channels,   time_channel = NULL,   event_channel = NULL,   sample_rate = NULL,   add_timestamp = FALSE,   zero_time = FALSE,   keep_all = FALSE,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read mnirs data from file ‚Äî read_mnirs","text":"file_path file path including extension (either \".xlsx\", \".xls\", \".csv\") import. nirs_channels character vector indicating mNIRS column names import file. Must match column names data file exactly. named character vector can used rename columns form: c(new_name = \"original_name\") (see Details). time_channel optional character string indicating time sample column name import file. Must match column names data file exactly. named character vector can used rename columns form: c(new_name = \"original_name\"). Time converted numeric format (see Details). event_channel optional character string indicating event lap column name import file. Must match column names data file exactly. named character vector can used rename columns form: c(new_name = \"original_name\") (see Details). sample_rate optional numeric value exported sample rate Hz. defined explicitly, estimated data (see Details). add_timestamp <development> logical add \"timestamp\" column date-time values class POSIXct, present data file. Currently functions existing time_channel data timestamp format (see Details). zero_time logical re-calculate time_channel zero preserve original time_channel values (FALSE, default). keep_all logical include columns detected file include explicitly specified data columns (FALSE, default). verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read mnirs data from file ‚Äî read_mnirs","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read mnirs data from file ‚Äî read_mnirs","text":"Channel names matched single row, representing header row data columns anywhere data file, necessarily top row file. Channels can renamed format c(new_name = \"original_name\"), *\"original_name\"* exactly match column names found file. duplicate column names file, channel names attempt match order appear. may want confirm correct columns assigned channel intended. nirs_channels must defined explicitly match column names exactly. time_channel left blank, function attempt identify time column automatically based column names values containing time (POSIXct) data time-formatted character strings (e.g. \"hh:mm:ss\"). time_channel typically contain time values seconds. However, NIRS devices (example, Artinis devices recorded Oxysoft) export sample index (.e. integer row numbers). Oxysoft export sample rate detected file metadata, \"time\" column added converting sample indices time values seconds. time_channel provided date-time (POSIXct) format, converted numeric values re-calculated zero, even zero_time = FALSE. add_timestamp = TRUE, additional \"timestamp \" column added original date-time values. functionality currently <development> recognise start-time values file return absolute unix timestamps available. Setting zero_time = TRUE re-calculate numeric time_channel values start zero. time_channel contains irregular sampling (.e., non-sequential, repeated, unordered values) warning displayed (verbose = TRUE) suggesting user confirm file data manually. sample_rate required certain {mnirs} functions work properly can carried forward data frame metadata. defined explicitly, estimated differences values time_channel. , certain cases time_channel represents sample indices rather time values, sample_rate inaccurately estimated 1 Hz. cases, sample_rate defined explicitly. Columns rows contain entirely missing data (NA) omitted. verbose = TRUE display warnings information messages can useful troubleshooting. Errors causing abort messages always displayed. Messages can silenced globally options(mnirs.verbose = FALSE).","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/read_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read mnirs data from file ‚Äî read_mnirs","text":"","code":"## call an example mNIRS data file file_path <- example_mnirs(\"moxy_ramp\")  data_table <- read_mnirs(     file_path,     nirs_channels = c(smo2_right = \"SmO2 Live\", ## identify and rename channels                       smo2_left = \"SmO2 Live(2)\"),     time_channel = c(time = \"hh:mm:ss\"), ## date-time format will be converted to numeric     verbose = FALSE                       ## hide warnings & messages )  data_table #> # A tibble: 2,203 √ó 3 #>     time smo2_right smo2_left #>    <dbl>      <dbl>     <dbl> #>  1  0            54        68 #>  2  0.4          54        68 #>  3  0.96         54        68 #>  4  1.51         54        66 #>  5  2.06         54        66 #>  6  2.61         54        66 #>  7  3.16         54        66 #>  8  3.71         57        67 #>  9  4.26         57        67 #> 10  4.81         57        67 #> # ‚Ñπ 2,193 more rows"},{"path":"https://jemarnold.github.io/mnirs/reference/recycle_param.html","id":null,"dir":"Reference","previous_headings":"","what":"Recycle parameter to match number of events ‚Äî recycle_param","title":"Recycle parameter to match number of events ‚Äî recycle_param","text":"Recycle argument vector list repeat last list item match number events.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/recycle_param.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recycle parameter to match number of events ‚Äî recycle_param","text":"","code":"recycle_param(param, n_events, group_events, verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/recycle_to_length.html","id":null,"dir":"Reference","previous_headings":"","what":"Recycle parameter list to target length ‚Äî recycle_to_length","title":"Recycle parameter list to target length ‚Äî recycle_to_length","text":"Recycle parameter list target length","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/recycle_to_length.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recycle parameter list to target length ‚Äî recycle_to_length","text":"","code":"recycle_to_length(param, n, name = c(\"event\", \"group\"), verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/remove_empty_rows_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Empty Rows and Columns ‚Äî remove_empty_rows_cols","title":"Remove Empty Rows and Columns ‚Äî remove_empty_rows_cols","text":"Remove Empty Rows Columns","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/remove_empty_rows_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Empty Rows and Columns ‚Äî remove_empty_rows_cols","text":"","code":"remove_empty_rows_cols(data)"},{"path":"https://jemarnold.github.io/mnirs/reference/rename_duplicates.html","id":null,"dir":"Reference","previous_headings":"","what":"Rename duplicate strings in a vector with make.unique() ‚Äî rename_duplicates","title":"Rename duplicate strings in a vector with make.unique() ‚Äî rename_duplicates","text":"Rename duplicate strings vector make.unique()","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/rename_duplicates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rename duplicate strings in a vector with make.unique() ‚Äî rename_duplicates","text":"","code":"rename_duplicates(x)"},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"replace_mnirs() detects removes local outliers specified invalid values nirs_channels within \"mnirs\" data frame, replaces missing NA values via interpolation methods. replace_invalid() detects specified invalid values cutoff values vector data replaces local median value NA. replace_outliers() detects local outliers vector data Hampel filter replaces local median value NA. replace_missing() detects missing values vector data replaces via interpolation methods.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"","code":"replace_mnirs(   data,   nirs_channels = NULL,   time_channel = NULL,   invalid_values = NULL,   invalid_above = NULL,   invalid_below = NULL,   outlier_cutoff = NULL,   width = NULL,   span = NULL,   method = c(\"linear\", \"median\", \"locf\", \"none\"),   verbose = TRUE )  replace_invalid(   x,   t = seq_along(x),   invalid_values = NULL,   invalid_above = NULL,   invalid_below = NULL,   width = NULL,   span = NULL,   method = c(\"median\", \"none\"),   verbose = TRUE )  replace_outliers(   x,   t = seq_along(x),   outlier_cutoff = 3L,   width = NULL,   span = NULL,   method = c(\"median\", \"none\"),   verbose = TRUE )  replace_missing(   x,   t = seq_along(x),   width = NULL,   span = NULL,   method = c(\"linear\", \"median\", \"locf\"),   ... )"},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"data data frame class \"mnirs\" containing time series data metadata. nirs_channels character vector mNIRS channel names operate . Must match column names data exactly. Retrieved metadata defined explicitly. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. invalid_values numeric vector invalid values replaced, e.g. invalid_values = c(0, 100, 102.3). default NULL replace invalid values. invalid_above, invalid_below Numeric values specifying cutoff values, (respectively) replaced, inclusive specified cutoff values. outlier_cutoff integer local outlier threshold, number standard deviations local median. default outlier_cutoff = NULL replace outliers. outlier_cutoff = 3 standard replacement threshold following Pearson's rule. width integer defining local window number samples around idx perform operation., [idx - floor(width/2), idx + floor(width/2)]. span numeric value defining local window timespan around idx perform operation. units time_channel t, [t - span/2, t + span/2]. method character string indicating handle replacement (see Details method): \"linear\" Replaces NAs via linear interpolation (default) using stats::approx(). \"median\" Replaces NAs local median valid values within centred window defined either width span. \"locf\" (\"Last observation carried forward\"). Replaces NAs recent valid non-NA value left trailing NAs right leading NAs, using stats::approx(). \"none\" Returns NAs without replacement. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting. x numeric vector. t optional numeric vector time sample number. ... Additional arguments.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"replace_mnirs() returns tibble class \"mnirs\" metadata available attributes(). Vectorised replace_*() return numeric vector length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"replace_mnirs() wrapper function expanding vectorised replace_* functions operate data frame. nirs_channels time_channel can retrieved automatically data class \"mnirs\" processed {mnirs}, defined explicitly. Channels (columns) data explicitly defined nirs_channels passed untouched output data frame. replace_outliers replace_missing method = \"median\" require defining local rolling window perform outlier detection median interpolation. window can specified either width number samples centred idx [idx - floor(width/2), idx + floor(width/2)], span timespan units time_channel centred idx [t - span/2, t + span/2]. partial moving average calculated edges data. replace_invalid() can used remove known invalid values exported data. Specific invalid_values can replaced, c(0, 100, 102.3). Data ranges can replaced cutoff values specified invalid_above invalid_below, values higher lower specified cutoff values (respectively) replaced, inclusive cutoff values . replace_outliers() compute rolling local median values across x, defined either width number samples, span timespan units t. Outliers detected robust median absolute deviation (MAD) method adapted pracma::hampel(). Outliers equal less smallest absolute time series difference x excluded, avoid detecting negligible differences outliers local data minimal zero variation. Values x outside local bounds defined outlier_cutoff identified local outliers either removed method = \"none\", replaced local median value (method = \"median\", default). function replace NA values already existing x. passed along returned vector. See replace_missing(). high outlier_cutoff threshold makes Hampel filter forgiving. low outlier_cutoff declare points outliers. outlier_cutoff = 3 corresponds Pearson's 3 sigma edit rule. outlier_cutoff = 0 corresponds Tukey's median filter. replace_missing() interpolate across missing values (NAs) specified method. Leading trailing NAs replaced \"nocb\" (\"next observation carried backward\") \"locf\", respectively, method =  \"linear\" \"locf\", applying rule = 2 (see stats::approx()). method = \"median\" calculate local median valid (non-NA) values either side NAs within window defined width number samples, timespan defined span units t (time). sequential NAs replaced median value. valid values within span one side NA value(s), replaced median side (.e. leading trailing NAs). valid values within either side span, first valid sample either side used (.e. equivalent replace_missing(x, width = 1)).","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/replace_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace outliers, invalid values, and missing values ‚Äî replace_mnirs","text":"","code":"library(ggplot2)  ## vectorised operation x <- c(1, 999, 3, 4, 999, 6) replace_invalid(x, invalid_values = 999, width = 2, method = \"median\") #> [1] 1 2 3 4 5 6  (x_na <- replace_outliers(x, outlier_cutoff = 3, width = 2, method = \"none\")) #> [1]  1 NA  3  4 NA  6  replace_missing(x_na, method = \"linear\") #> [1] 1 2 3 4 5 6  ## read example data data <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2 = \"SmO2 Live\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE )  ## clean data data_clean <- replace_mnirs(     data,     nirs_channels = NULL,       ## default to all nirs_channels in metadata     time_channel = NULL,        ## default to time_channel in metadata     invalid_values = c(0, 100), ## known invalid values in the data     outlier_cutoff = 3,         ## recommended default value     width = 10,                 ## local window to detect local outliers and replace missing values     method = \"linear\",          ## linear interpolation over `NA`s )  ## plot original and and show where values have been replaced plot(data, label_time = TRUE) +     scale_colour_manual(         name = NULL,         breaks = c(\"smo2\", \"replaced\"),         values = palette_mnirs(2)     ) +     geom_point(         data = data[data_clean$smo2 != data$smo2, ],         aes(y = smo2, colour = \"replaced\"), na.rm = TRUE     ) +     geom_line(         data = {             data_clean[!is.na(data$smo2), \"smo2\"] <- NA             data_clean         },         aes(y = smo2, colour = \"replaced\"), linewidth = 1, na.rm = TRUE     ) #> Scale for colour is already present. #> Adding another scale for colour, which will replace the existing scale."},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Re-sample a data frame ‚Äî resample_mnirs","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"- -sample number samples \"mnirs\" data frame using interpolation.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"","code":"resample_mnirs(   data,   time_channel = NULL,   sample_rate = NULL,   resample_rate = sample_rate,   method = c(\"linear\", \"locf\", \"none\"),   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"data data frame class \"mnirs\" containing time series data metadata. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. sample_rate numeric value exported data sample rate Hz. Retrieved metadata estimated time_channel defined explicitly. resample_rate optional numeric value indicating desired output sample rate (Hz) re-sample data frame. default resample_rate = sample_rate interpolate missing repeated samples within bounds existing data rounded nearest value Hz. method character string indicating handle resampling (see Details method): \"linear\" Re-samples replaces NAs via linear interpolation (default) using stats::approx(). \"locf\" (\"Last observation carried forward\"). Re-samples replaces NAs recent valid non-NA value left trailing samples right leading samples, using stats::approx(). \"none\" Re-samples matching values nearest value time_channel, without interpolating across new samples NAs original data frame. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"function uses replace_missing() (based stats::approx()) interpolate across new samples re-sampled data range. time_channel sample_rate can retrieved automatically data class \"mnirs\" processed {mnirs}, defined explicitly. Otherwise, sample_rate estimated values time_channel. However, may return unexpected values, safer define sample_rate explicitly. default setting resample_rate = sample_rate interpolate missing repeated samples within bounds existing data rounded nearest sample_rate. default, method = \"linear\" \"locf\" interpolate across NAs original data new samples existing values time_channel (see ?replace_missing). Whereas method = \"none\" match values numeric columns original samples time_channel new re-sampled samples, without interpolation. Meaning NAs original data new samples returned NA.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/resample_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Re-sample a data frame ‚Äî resample_mnirs","text":"","code":"## read example data data <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2 = \"SmO2 Live\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE )  data #> # A tibble: 2,203 √ó 2 #>     time  smo2 #>    <dbl> <dbl> #>  1  0       54 #>  2  0.4     54 #>  3  0.96    54 #>  4  1.51    54 #>  5  2.06    54 #>  6  2.61    54 #>  7  3.16    54 #>  8  3.71    57 #>  9  4.26    57 #> 10  4.81    57 #> # ‚Ñπ 2,193 more rows  data_resampled <- resample_mnirs(     data,     # time_channel = NULL,         ## taken from metadata     # sample_rate = NULL,     # resample_rate = sample_rate, ## the default will re-sample to sample_rate     method = \"linear\",             ## default linear interpolation across any new samples     verbose = FALSE                ## will confirm the output sample rate )  ## note the altered \"time\" values üëá data_resampled #> # A tibble: 2,419 √ó 2 #>     time  smo2 #>    <dbl> <dbl> #>  1   0    54   #>  2   0.5  54   #>  3   1    54   #>  4   1.5  54   #>  5   2    54   #>  6   2.5  54   #>  7   3    54   #>  8   3.5  55.9 #>  9   4    57   #> 10   4.5  57   #> # ‚Ñπ 2,409 more rows"},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Re-scale data range ‚Äî rescale_mnirs","title":"Re-scale data range ‚Äî rescale_mnirs","text":"Expand reduce range (min max values) data channels new amplitude/dynamic range, e.g. re-scale range NIRS data c(0, 100).","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Re-scale data range ‚Äî rescale_mnirs","text":"","code":"rescale_mnirs(data, nirs_channels = list(NULL), range, verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Re-scale data range ‚Äî rescale_mnirs","text":"data data frame class \"mnirs\" containing time series data metadata. nirs_channels list() character vectors indicating grouping structure mNIRS channel names operate (see Details). Must match column names data exactly. Retrieved metadata defined explicitly. list(\"\", \"B\", \"C\") operate channel independently, losing relative scaling channels. list(c(\"\", \"B\", \"C\")) operate channels together, preserving relative scaling channels. list(c(\"\", \"B\"), c(\"C\", \"D\")) operate channels & B one group, C & D another group, preserving relative scaling within, groups. range numeric vector form c(min, max), indicating range output values data channels re-scaled. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Re-scale data range ‚Äî rescale_mnirs","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Re-scale data range ‚Äî rescale_mnirs","text":"nirs_channels = list() can used group data channels (column names) preserve absolute relative scaling. Channels grouped together vector (e.g. list(c(\"\", \"B\"))) re-scaled common range, relative scaling within group preserved. Channels separate list vectors (e.g. list(\"\", \"B\")) re-scaled independently, relative scaling groups lost. single vector channel names (e.g. c(\"\", \"B\")) group channels together. Channels (columns) data explicitly defined nirs_channels passed untouched output data frame. nirs_channels can retrieved automatically data class \"mnirs\" processed {mnirs}, defined explicitly. default returning nirs_channels grouped together, defined explicitly grouping arrangements.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/rescale_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Re-scale data range ‚Äî rescale_mnirs","text":"","code":"library(ggplot2)  options(mnirs.verbose = FALSE)  ## read example data data_rescaled <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2 = \"SmO2 Live\"),     time_channel = c(time = \"hh:mm:ss\") ) |>     resample_mnirs() |>     replace_mnirs(         invalid_values = c(0, 100),         outlier_cutoff = 3,         width = 10     ) |>     filter_mnirs(na.rm = TRUE) |>     rescale_mnirs(         range = c(0, 100)   ## rescale to a 0-100% functional exercise range     ) #> ‚Ñπ `nirs_channel` = \"smo2\": `smooth.spline(spar = 0.052)`  plot(data_rescaled, label_time = TRUE) +     geom_hline(yintercept = c(0, 100), linetype = \"dotted\")"},{"path":"https://jemarnold.github.io/mnirs/reference/scale_colour_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","title":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","text":"Scales custom mnirs palette","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/scale_colour_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","text":"","code":"scale_colour_mnirs(..., aesthetics = \"colour\")  scale_color_mnirs(..., aesthetics = \"colour\")  scale_fill_mnirs(..., aesthetics = \"fill\")"},{"path":"https://jemarnold.github.io/mnirs/reference/scale_colour_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","text":"... Arguments passed ggplot2::discrete_scale(). aesthetics character vector aesthetic(s) passed ggplot2::discrete_scale(). Default \"colour\".","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/scale_colour_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","text":"ggplot2 scale object.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/scale_colour_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scales for custom mnirs palette ‚Äî scale_colour_mnirs","text":"","code":"library(ggplot2)  ## plot example data df <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2_left = \"SmO2 Live\", smo2_right = \"SmO2 Live(2)\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE )  ggplot(df, aes(x = time)) +     theme_mnirs() +     scale_colour_mnirs(name = NULL) +     geom_line(aes(y = smo2_left, colour = \"smo2_left\")) +     geom_line(aes(y = smo2_right, colour = \"smo2_right\"))"},{"path":"https://jemarnold.github.io/mnirs/reference/select_rename_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Select data table columns and rename from channels, handling duplicates ‚Äî select_rename_data","title":"Select data table columns and rename from channels, handling duplicates ‚Äî select_rename_data","text":"Select data table columns rename channels, handling duplicates","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/select_rename_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select data table columns and rename from channels, handling duplicates ‚Äî select_rename_data","text":"","code":"select_rename_data(   data,   nirs_channels,   time_channel,   event_channel = NULL,   keep_all = FALSE,   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate numeric sequence from range of a vector ‚Äî seq_range","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"Creates numeric sequence spanning range input data specified step size direction. Optionally rounds range endpoints generating sequence.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"","code":"seq_range(x, by = 1, direction = c(\"up\", \"down\"), digits = NA)"},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"x numeric vector. numeric step size sequence. Default 1. direction character string specifying sequence direction. Either \"\" (default) ascending \"\" descending sequence. digits integer specifying number decimal places round range endpoints, NA (default) rounding.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"numeric vector spanning range input data.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"output vector likely different length input vector. function: Calculates range x (ignoring NA values). Optionally rounds range endpoints digits specified. Generates sequence specified step size. Reverses sequence direction = \"\".","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/seq_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate numeric sequence from range of a vector ‚Äî seq_range","text":"","code":"data <- c(1.2, 3.7, 2.1, 4.9, 2.8) mnirs:::seq_range(data) #> [1] 1.2 2.2 3.2 4.2 mnirs:::seq_range(data, by = 0.5) #> [1] 1.2 1.7 2.2 2.7 3.2 3.7 4.2 4.7 mnirs:::seq_range(data, by = 0.5, direction = \"down\") #> [1] 4.7 4.2 3.7 3.2 2.7 2.2 1.7 1.2  ## with rounding mnirs:::seq_range(data, by = 0.2, digits = 1) #>  [1] 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 3.8 4.0 4.2 4.4 4.6 4.8"},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Shift data range ‚Äî shift_mnirs","title":"Shift data range ‚Äî shift_mnirs","text":"Move range data channels data frame , preserving absolute amplitude/dynamic range channel, relative scaling across channels. e.g. shift minimum data value zero positive values, shift mean first time span recording zero.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shift data range ‚Äî shift_mnirs","text":"","code":"shift_mnirs(   data,   nirs_channels = list(NULL),   time_channel = NULL,   to = NULL,   by = NULL,   width = NULL,   span = NULL,   position = c(\"min\", \"max\", \"first\"),   verbose = TRUE )"},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shift data range ‚Äî shift_mnirs","text":"data data frame class \"mnirs\" containing time series data metadata. nirs_channels character vector mNIRS channel names operate . Must match column names data exactly. Retrieved metadata defined explicitly. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. numeric value units nirs_channels data channels shifted, e.g. shift minimum value zero. numeric value units nirs_channels data channels shifted, e.g. shift values 10 units. width integer defining local window number samples around idx perform operation., [idx - floor(width/2), idx + floor(width/2)]. span numeric value defining local window timespan around idx perform operation. units time_channel t, [t - span/2, t + span/2]. position Indicates reference values shifted . \"min\" (default) shift minimum value(s) specified value. \"max\" shift maximum value(s) specified values. \"first\" shift first value(s) specified values. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shift data range ‚Äî shift_mnirs","text":"tibble class \"mnirs\" metadata available attributes().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shift data range ‚Äî shift_mnirs","text":"nirs_channels = list() can used group data channels (column names) preserve absolute relative scaling. Channels grouped together vector (e.g. list(c(\"\", \"B\"))) shifted common value, relative scaling within group preserved. Channels separate list vectors (e.g. list(\"\", \"B\")) shifted independently, relative scaling groups lost. single vector channel names (e.g. c(\"\", \"B\")) group channels together. Channels (columns) data explicitly defined nirs_channels passed untouched output data frame. nirs_channels time_channel can retrieved automatically data class \"mnirs\" processed {mnirs}, defined explicitly. default returning nirs_channels grouped together, defined explicitly grouping arrangements. one either one either width span defined. either pairing defined, preferred , width preferred span.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/shift_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shift data range ‚Äî shift_mnirs","text":"","code":"library(ggplot2)  options(mnirs.verbose = FALSE)  ## read example data data_shifted <- read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2 = \"SmO2 Live\"),     time_channel = c(time = \"hh:mm:ss\") ) |>     resample_mnirs() |>     replace_mnirs(         invalid_values = c(0, 100),         outlier_cutoff = 3,         width = 10     ) |>     filter_mnirs(na.rm = TRUE) |>     shift_mnirs(         to = 0,             ## NIRS values will be shifted to zero         span = 120,         ## shift the first 120 sec of data to zero         position = \"first\"     ) #> ‚Ñπ `nirs_channel` = \"smo2\": `smooth.spline(spar = 0.052)`  plot(data_shifted, label_time = TRUE) +     geom_hline(yintercept = 0, linetype = \"dotted\")"},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":null,"dir":"Reference","previous_headings":"","what":"Format numbers for display as character strings ‚Äî signif_trailing","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"signif_trailing() converts numeric values character strings preserve trailing zeroes signif_whole() rounds numeric values specified number significant figures, nearest whole value number digits x greater digits. signif_pvalue() displays p-values either formatted numeric strings significance symbols.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"","code":"signif_trailing(x, digits = 2L, format = c(\"digits\", \"signif\"))  signif_whole(x, digits = 5L)  signif_pvalue(   x,   digits = 3L,   format = c(\"digits\", \"signif\"),   display = c(\"value\", \"symbol\"),   symbol = \"*\",   symbol_repeat = FALSE,   alpha = 0.05 )"},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"x numeric vector. digits integer specifying number decimal places significant figures preserve. Negative digits values round nearest whole value 10^(digits). format Indicates treat digits. Either desired number decimal places (format = \"digits\", default) significant figures decimal place (format = \"signif\"). display Specifies output type, either \"value\" (default) formatted numbers \"symbol\" significance symbols. symbol Character string specifying significance symbol. Default \"*\". symbol_repeat Logical indicating whether repeat symbols different significance levels. Default FALSE. alpha numeric value specifying significance threshold. Default 0.05.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"signif_trailing() returns character vector formatted numbers length x. signif_whole() returns numeric vector length x. signif_pvalue() returns character vector formatted p-values significance symbols length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"signif_trailing() Negative digits round respective integer place, e.g. signif_trailing(123, digits = -1) returns \"120\". Decimal rounding based \"banker's rounding\" default behaviour signif() round(), signif(123.45, 4) round(123.45, 1) return 123.4. signif_whole() Negative digits round nearest whole value digits = 0, e.g. signif_whole(123, digits = -5) still returns 123. signif_pvalue() display = \"value\" e.g. digits = 3, x either rounded 3 decimal places signif_trailing(), appear e.g. \"< 0.001\". digits = 1 display \"less alpha\", e.g. \"< 0.05\". display = \"symbol\", symbol_repeat = TRUE: Uses repeated symbols based thresholds (0.001 = \"***\", 0.01 = \"**\", alpha = \"*\", ns = \"\"). symbol_repeat = FALSE: Shows one symbol \"*\" p < alpha, otherwise empty string.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/signif_trailing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format numbers for display as character strings ‚Äî signif_trailing","text":"","code":"x <- c(123, 123.4, 123.45)  mnirs:::signif_trailing(x, digits = 1, format = \"digits\") #> [1] \"123.0\" \"123.4\" \"123.4\" mnirs:::signif_trailing(x, digits = -1, format = \"digits\") #> [1] \"120\" \"120\" \"120\" mnirs:::signif_trailing(x, digits = 5, format = \"signif\") #> [1] \"123.00\" \"123.40\" \"123.45\" mnirs:::signif_trailing(x, digits = 0, format = \"signif\") #> [1] \"123\" \"123\" \"123\"  x <- c(123, 123.4, 123.45)  mnirs:::signif_whole(x, digits = 5) #> [1] 123.00 123.40 123.45 mnirs:::signif_whole(x, digits = 2) #> [1] 123 123 123 mnirs:::signif_whole(x, digits = -1) #> [1] 123 123 123  p_vals <- c(0.0001, 0.003, 0.02, 0.08, 0.15)  ## format as numeric mnirs:::signif_pvalue(p_vals) #> [1] \"< 0.001\" \"0.003\"   \"0.020\"   \"0.080\"   \"0.150\"   mnirs:::signif_pvalue(p_vals, digits = 1) #> [1] \"< 0.05\" \"< 0.05\" \"< 0.05\" \"0.08\"   \"0.15\"    ## format as symbols mnirs:::signif_pvalue(p_vals, display = \"symbol\") #> [1] \"*\" \"*\" \"*\" \"\"  \"\"  mnirs:::signif_pvalue(p_vals, display = \"symbol\", symbol_repeat = TRUE) #> [1] \"***\" \"**\"  \"*\"   \"\"    \"\"     ## custom alpha and symbol mnirs:::signif_pvalue(p_vals, display = \"symbol\", alpha = 0.01, symbol = \"‚Ä†\", symbol_repeat = TRUE) #> [1] \"‚Ä†‚Ä†‚Ä†\" \"‚Ä†‚Ä†\"  \"\"    \"\"    \"\""},{"path":"https://jemarnold.github.io/mnirs/reference/specify_intervals.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert event indices and spans to interval specifications ‚Äî specify_intervals","title":"Convert event indices and spans to interval specifications ‚Äî specify_intervals","text":"Convert event indices spans interval specifications","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/specify_intervals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert event indices and spans to interval specifications ‚Äî specify_intervals","text":"","code":"specify_intervals(time_vec, event_indices, span, verbose = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"[ggplot2][ggplot2::ggplot2-package] theme display.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"","code":"theme_mnirs(   base_size = 14,   base_family = \"sans\",   border = c(\"partial\", \"full\"),   ink = \"black\",   paper = \"white\",   accent = \"#0080ff\",   ... )"},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"base_size Base font size, given pts. base_family Base font family. border Define either partial full border around plots. ink Colour text lines. Default \"black\". paper Background colour. Default \"white\". accent Accent colour highlights. Default \"#0080ff\". ... Additional arguments add [theme()][ggplot2::theme()].","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"ggplot2 object.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"axis.title = element_text(face = \"bold\") default Modify \"plain\". panel.grid.major & panel.grid.major set blank. Modify = element_line() visible grid lines. legend.position = \"top\" default Modify \"none\" remove legend entirely. border = \"partial\" uses panel.border = element_blank() axis.line = element_line(). border = \"full\" uses panel.border = element_rect(colour = \"black\", linewidth = 1) axis.line = element_line(). base_family = \"sans\" default. \"Merriweather Sans\" nice alternative font can installed https://fonts.google.com/specimen/Merriweather+Sans.","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/theme_mnirs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Custom mnirs ggplot2 theme ‚Äî theme_mnirs","text":"","code":"library(ggplot2)  ## set theme for the current script theme_set(theme_mnirs())  ## plot example data read_mnirs(     file_path = example_mnirs(\"moxy_ramp\"),     nirs_channels = c(smo2_left = \"SmO2 Live\", smo2_right = \"SmO2 Live(2)\"),     time_channel = c(time = \"hh:mm:ss\"),     verbose = FALSE ) |>     plot(label_time = TRUE)"},{"path":"https://jemarnold.github.io/mnirs/reference/train.red_intervals.csv.html","id":null,"dir":"Reference","previous_headings":"","what":"10 Hz Train.Red App export ‚Äî train.red_intervals.csv","title":"10 Hz Train.Red App export ‚Äî train.red_intervals.csv","text":"Exported Train.Red app, recorded 10 Hz. Containing two 5-minute cycling work intervals, placed bilateral vastus lateralis muscle sites.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/train.red_intervals.csv.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"10 Hz Train.Red App export ‚Äî train.red_intervals.csv","text":".csv file header metadata 18 columns 12001 rows. nirs_channels = c(\"SmO2\", \"HBDiff\", \"O2HB unfiltered\", \"HHb unfiltered\", \"THb unfiltered\") time_channel = c(\"Timestamp (seconds passed)\") event_channel = c(\"Lap/Event\") event_times = c(2455, 3166) ## c(371, 1082) zero_time","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/validate_mnirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate {mnirs} parameters ‚Äî validate_mnirs","title":"Validate {mnirs} parameters ‚Äî validate_mnirs","text":"Passes manually defined parameters, defines metadata present, validates relevant data quality checks.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/validate_mnirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate {mnirs} parameters ‚Äî validate_mnirs","text":"","code":"validate_numeric(   x,   elements = Inf,   range = NULL,   inclusive = c(\"left\", \"right\"),   integer = FALSE,   msg1 = \"\",   msg2 = \".\" )  validate_mnirs_data(data, ncol = 2L)  validate_nirs_channels(data, nirs_channels, verbose = TRUE)  validate_time_channel(data, time_channel)  validate_event_channel(data, event_channel, require = TRUE)  estimate_sample_rate(x)  validate_sample_rate(data, time_channel, sample_rate, verbose = TRUE)  validate_width_span(width = NULL, span = NULL, verbose = TRUE)  validate_x_t(x, t = seq_along(x))"},{"path":"https://jemarnold.github.io/mnirs/reference/validate_mnirs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate {mnirs} parameters ‚Äî validate_mnirs","text":"x numeric vector. elements numeric value number numeric elements arg. range two-element numeric vector range valid numeric values arg. inclusive character vector specify left /right boundary values included range, (default), excluded FALSE. integer logical indicating whether test arg integer using rlang::is_integerish(), rather numeric (FALSE default). msg1, msg2 character string detailing cli_abort error message returned invalid numeric values passed arg. data data frame class \"mnirs\" containing time series data metadata. nirs_channels character vector mNIRS channel names operate . Must match column names data exactly. Retrieved metadata defined explicitly. verbose logical display (default) silence (FALSE) warnings information messages used troubleshooting. time_channel character string indicating time sample channel name. Must match column names data exactly. Retrieved metadata defined explicitly. event_channel character string indicating event lap channel name. Must match column names data exactly. Retrieved metadata defined explicitly. require logical specifying whether event_channel required (default) optional (event_channel returned NULL). sample_rate numeric value exported data sample rate Hz. Retrieved metadata estimated time_channel defined explicitly.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/validate_mnirs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate {mnirs} parameters ‚Äî validate_mnirs","text":"validated object error message cli::cli_abort().","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/within.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect if numeric values fall within range of a vector ‚Äî within","title":"Detect if numeric values fall within range of a vector ‚Äî within","text":"Vectorised check x %% vec, inclusive exclusive left right boundary values, specified independently.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/within.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect if numeric values fall within range of a vector ‚Äî within","text":"","code":"within(x, vec, inclusive = c(\"left\", \"right\"))"},{"path":"https://jemarnold.github.io/mnirs/reference/within.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect if numeric values fall within range of a vector ‚Äî within","text":"x numeric vector. vec numeric vector left right boundary values x taken. inclusive character vector specify left /right boundary values included range, (default), excluded FALSE.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/within.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect if numeric values fall within range of a vector ‚Äî within","text":"logical vector length x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/within.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect if numeric values fall within range of a vector ‚Äî within","text":"inclusive = FALSE can used test positive non-zero values: (x, vec, inclusive = FALSE).","code":""},{"path":[]},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrap vector elements ‚Äî wrap","title":"Wrap vector elements ‚Äî wrap","text":"Rotates vector elements moving first n elements end.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrap vector elements ‚Äî wrap","text":"","code":"wrap(x, n = 0L)"},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrap vector elements ‚Äî wrap","text":"x vector. n integer specifying number elements move start end. Default 0 (wrapping). Negative values move elements end start.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrap vector elements ‚Äî wrap","text":"vector elements x.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wrap vector elements ‚Äî wrap","text":"function: Returns x unchanged n = 0. Moves first n elements end vector. negative n, effectively moves elements end start. n larger length(x), positions wrap around.","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/wrap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wrap vector elements ‚Äî wrap","text":"","code":"x <- 1:5 mnirs:::wrap(x, 2) #> [1] 3 4 5 1 2 mnirs:::wrap(x, 0) #> [1] 1 2 3 4 5  ## wrapping with n larger than vector length mnirs:::wrap(x, 7)  ## same as wrap(x, 2) #> [1] 3 4 5 1 2  ## negative wrapping (move from end to start) mnirs:::wrap(x, -1) #> [1] 5 1 2 3 4  ## works with any vector type mnirs:::wrap(letters[1:4], 1) #> [1] \"b\" \"c\" \"d\" \"a\""},{"path":"https://jemarnold.github.io/mnirs/reference/zero_offset_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Recalculate time_channel values with zero offset at event time (x0) ‚Äî zero_offset_data","title":"Recalculate time_channel values with zero offset at event time (x0) ‚Äî zero_offset_data","text":"Recalculate time_channel values zero offset event time (x0)","code":""},{"path":"https://jemarnold.github.io/mnirs/reference/zero_offset_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recalculate time_channel values with zero offset at event time (x0) ‚Äî zero_offset_data","text":"","code":"zero_offset_data(data, time_channel, x0)"},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-018","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.8","title":"mnirs 0.1.8","text":"Create extract_intervals() detect events extract surrounding data frames. Replace internal () within() differentiate dplyr::()","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-017","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.7","title":"mnirs 0.1.7","text":"Minor edits functions documentation improve clarity. filter_mnirs() filter_butter() arg n order. palette_mnirs() arg n either numeric character, numeric, names character arg. replace_mnirs(), replace_outleirs(), replace_missing(), resample_mnirs() arg method = \"NA\" method = \"none\". Revert argument inform verbose. Standardise cli_inform(), cli_warn(), cli_abort() messages. Remove redundant resample_mnirs() argument resample_time.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-016","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.6","title":"mnirs 0.1.6","text":"signif_whole() applies sig-fig rounding decimal places, whole values. signif_trailing() applies decimal sig-fig rounding convers character strings trailing zeroes, display. signif_pvalue() applies formatting p-value display character strings significance symbols. seq_range() creates numeric sequence spanning range ipnut vector. wrap() rotates vector elements head tail (tail head) position. Add statement use generative AI codebots README.Rmd","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-015","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.5","title":"mnirs 0.1.5","text":"Remove redundant validation checks replace_mnirs(). Fix erroneous url _pkgdown.yml. Update internal validate_event_channel error empty numeric character column. Cover new options(mnirs.inform = FALSE). Cover unlisted metadata added create_mnirs_data(). Cover hidden plot.mnirs() options.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-014","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.4","title":"mnirs 0.1.4","text":"Update argument inform replaces verbose display/hide messages & warnings. Global option mnirs.inform = FALSE override functions‚Äô implicit default inform = TRUE. Explicit call inform = TRUE override global option. Replace ranges invalid_above invalid_below, respectively.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-013","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.3","title":"mnirs 0.1.3","text":"Remove redundant file mnirs.test-package.Rd. Remove obsolete {utils} dependency. Remove redundant nirs_device arg internal read_data_table(). Implement air formatter. Migrate package development Positron IDE.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-012","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.2","title":"mnirs 0.1.2","text":"Update internal helpers: compute_local_windows() & compute_window_of_valid_neighbours() Update appropriate documentation. Update README, vignette, & examples width = 10. entirely sure pass CRAN. May need update. Update create_mnirs_data() correctly accept listed unlisted metadata.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-011","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.1","title":"mnirs 0.1.1","text":"Fix formatting error README.Rmd. Remove obsolete code resample_mnirs.R. Add missing tests replace_mnirs(), resample_mnirs(), plot.mnirs(). Update documentation formatting examples.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-010-initial-release","dir":"Changelog","previous_headings":"","what":"mnirs 0.1.0 initial release","title":"mnirs 0.1.0 initial release","text":"Initial release reading cleaning functions. Basic README demonstrating functionality. Website documentation available , including function reference index vignettes.","code":""},{"path":"https://jemarnold.github.io/mnirs/news/index.html","id":"mnirs-0009000","dir":"Changelog","previous_headings":"","what":"mnirs 0.0.0.9000","title":"mnirs 0.0.0.9000","text":"initial commit. project setup.","code":""}]
