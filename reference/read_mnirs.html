<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read mnirs data from file — read_mnirs • mnirs</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read mnirs data from file — read_mnirs"><meta name="description" content='Read files exported from most commercially available mNIRS devices and
return a data frame of class "mnirs" with recorded time series data
and metadata.'><meta property="og:description" content='Read files exported from most commercially available mNIRS devices and
return a data frame of class "mnirs" with recorded time series data
and metadata.'><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@jem_arnold"><meta name="twitter:site" content="@jem_arnold"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mnirs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/reading-mnirs-data.html">Reading and Cleaning Data with {mnirs}</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/jemarnold.bsky.social" aria-label="Bluesky"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/jem_arnold" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jemarnold/mnirs" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Read <em>mnirs</em> data from file</h1>
      <small class="dont-index">Source: <a href="https://github.com/jemarnold/mnirs/blob/v.0.1.9/R/read_mnirs.R" class="external-link"><code>R/read_mnirs.R</code></a></small>
      <div class="d-none name"><code>read_mnirs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Read files exported from most commercially available mNIRS devices and
return a data frame of class <em>"mnirs"</em> with recorded time series data
and metadata.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_mnirs</span><span class="op">(</span></span>
<span>  <span class="va">file_path</span>,</span>
<span>  <span class="va">nirs_channels</span>,</span>
<span>  time_channel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_channel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample_rate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_timestamp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  zero_time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_all <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file-path">file_path<a class="anchor" aria-label="anchor" href="#arg-file-path"></a></dt>
<dd><p>The file path including extension (either <em><code>".xlsx"</code></em>,
<em><code>".xls"</code></em>, or <em><code>".csv"</code></em>) to import.</p></dd>


<dt id="arg-nirs-channels">nirs_channels<a class="anchor" aria-label="anchor" href="#arg-nirs-channels"></a></dt>
<dd><p>A character vector indicating the mNIRS column names
to import from the file. Must match column names in the data file exactly.
A named character vector can be used to rename columns in the form:
<code>c(new_name = "original_name")</code> (see <em>Details</em>).</p></dd>


<dt id="arg-time-channel">time_channel<a class="anchor" aria-label="anchor" href="#arg-time-channel"></a></dt>
<dd><p>An <em>optional</em> character string indicating the time or
sample column name to import from the file. Must match column names in the
data file exactly. A named character vector can be used to rename columns
in the form: <code>c(new_name = "original_name")</code>. Time will be converted to
<em>numeric</em> format (see <em>Details</em>).</p></dd>


<dt id="arg-event-channel">event_channel<a class="anchor" aria-label="anchor" href="#arg-event-channel"></a></dt>
<dd><p>An <em>optional</em> character string indicating the event or
lap column name to import from the file. Must match column names in the
data file exactly. A named character vector can be used to rename columns
in the form: <code>c(new_name = "original_name")</code> (see <em>Details</em>).</p></dd>


<dt id="arg-sample-rate">sample_rate<a class="anchor" aria-label="anchor" href="#arg-sample-rate"></a></dt>
<dd><p>An <em>optional</em> numeric value for the exported sample rate
in Hz. If not defined explicitly, will be estimated from the data (see
<em>Details</em>).</p></dd>


<dt id="arg-add-timestamp">add_timestamp<a class="anchor" aria-label="anchor" href="#arg-add-timestamp"></a></dt>
<dd><p><code>&lt;under development&gt;</code> A logical to add a <em>"timestamp"</em>
column with date-time values of class <em>POSIXct</em>, if present in the
data file. Currently only functions if the existing <code>time_channel</code> data
are in timestamp format (see <em>Details</em>).</p></dd>


<dt id="arg-zero-time">zero_time<a class="anchor" aria-label="anchor" href="#arg-zero-time"></a></dt>
<dd><p>A logical to re-calculate <code>time_channel</code> from zero or
preserve the original <code>time_channel</code> values (<code>FALSE</code>, the <em>default</em>).</p></dd>


<dt id="arg-keep-all">keep_all<a class="anchor" aria-label="anchor" href="#arg-keep-all"></a></dt>
<dd><p>A logical to include all columns detected from the file
or only include the explicitly specified data columns (<code>FALSE</code>, the
<em>default</em>).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical to display (the <em>default</em>) or silence (<code>FALSE</code>)
warnings and information messages used for troubleshooting.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://tibble.tidyverse.org/reference/tibble-package.html" class="external-link">tibble</a> of class <em>"mnirs"</em> with metadata
available with <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Channel names are matched to a single row, representing the header row for
data columns anywhere in the data file, not necessarily the top row of
the file.</p>
<p>Channels can be renamed in the format <code>c(new_name = "original_name")</code>,
where <code>*"original_name"*</code> should exactly match the column names found in
the file.</p>
<p>If there are duplicate column names in the file, the channel names will
attempt to match them in the order in which they appear. You may want to
confirm that the correct columns have been assigned to each channel as
intended.</p>
<p><code>nirs_channels</code> must be defined explicitly and match column names exactly.
If <code>time_channel</code> is left blank, the function will attempt to identify a
time column automatically based on column names or values containing time
(<code>POSIXct</code>) data or time-formatted character strings (e.g. <em>"hh:mm:ss"</em>).</p>
<p><code>time_channel</code> will typically contain time values in seconds. However,
some NIRS devices (for example, <em>Artinis</em> devices recorded with <em>Oxysoft</em>)
export the sample index (i.e. integer row numbers). If <em>Oxysoft</em> export
sample rate is detected in the file metadata, a <code>"time"</code> column will be
added converting the sample indices to time values in seconds.</p>
<p>When the <code>time_channel</code> is provided in date-time (<em>POSIXct</em>) format, it
will be converted to numeric values and re-calculated from zero,
even when <code>zero_time = FALSE</code>.</p>
<p>With <code>add_timestamp = TRUE</code>, an additional <em>"timestamp "</em> column will be
added with the original date-time values. This functionality is currently
<code>&lt;under development&gt;</code> to recognise start-time values in the file and
return absolute unix timestamps if available.</p>
<p>Setting <code>zero_time = TRUE</code> will re-calculate numeric <code>time_channel</code> values
to start from zero.</p>
<p>If <code>time_channel</code> contains irregular sampling (i.e., non-sequential,
repeated, or unordered values) a warning will be displayed (if
<code>verbose = TRUE</code>) suggesting that the user confirm the file data manually.</p>
<p><code>sample_rate</code> is required for certain <code>{mnirs}</code> functions to work properly
and can be carried forward in the data frame metadata. If it is not
defined explicitly, it will be estimated from the differences between
values in the <code>time_channel</code>. As above, in certain cases where the
<code>time_channel</code> represents sample indices rather than time values,
<code>sample_rate</code> will be inaccurately estimated to be 1 Hz. In such cases,
<code>sample_rate</code> should be defined explicitly.</p>
<p>Columns and rows which contain entirely missing data (<code>NA</code>) are omitted.</p>
<p><code>verbose = TRUE</code> will display warnings and information messages which can be
useful for troubleshooting. Errors causing abort messages will always be
displayed. Messages can be silenced globally with
<code>options(mnirs.verbose = FALSE)</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## call an example mNIRS data file</span></span></span>
<span class="r-in"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="example_mnirs.html">example_mnirs</a></span><span class="op">(</span><span class="st">"moxy_ramp"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_table</span> <span class="op">&lt;-</span> <span class="fu">read_mnirs</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">file_path</span>,</span></span>
<span class="r-in"><span>    nirs_channels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>smo2_right <span class="op">=</span> <span class="st">"SmO2 Live"</span>, <span class="co">## identify and rename channels</span></span></span>
<span class="r-in"><span>                      smo2_left <span class="op">=</span> <span class="st">"SmO2 Live(2)"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    time_channel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>time <span class="op">=</span> <span class="st">"hh:mm:ss"</span><span class="op">)</span>, <span class="co">## date-time format will be converted to numeric</span></span></span>
<span class="r-in"><span>    verbose <span class="op">=</span> <span class="cn">FALSE</span>                       <span class="co">## hide warnings &amp; messages</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_table</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2,203 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     time smo2_right smo2_left</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0             54        68</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0.400         54        68</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0.960         54        68</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 1.51          54        66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2.06          54        66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2.61          54        66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 3.16          54        66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 3.71          57        67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 4.26          57        67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 4.81          57        67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2,193 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jem Arnold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

