<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract intervals from mnirs data — extract_intervals • mnirs</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract intervals from mnirs data — extract_intervals"><meta name="description" content="Detects and extracts intervals around specified events from time series
data for analysis."><meta property="og:description" content="Detects and extracts intervals around specified events from time series
data for analysis."><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@jem_arnold"><meta name="twitter:site" content="@jem_arnold"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mnirs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/reading-mnirs-data.html">Reading and Cleaning Data with {mnirs}</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/jemarnold.bsky.social" aria-label="Bluesky"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/jem_arnold" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jemarnold/mnirs" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract intervals from <em>mnirs</em> data</h1>
      <small class="dont-index">Source: <a href="https://github.com/jemarnold/mnirs/blob/main/R/extract_intervals.R" class="external-link"><code>R/extract_intervals.R</code></a></small>
      <div class="d-none name"><code>extract_intervals.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Detects and extracts intervals around specified events from time series
data for analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_intervals</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  nirs_channels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  time_channel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_channel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample_rate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_times <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_samples <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="fl">180</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  group_events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"distinct"</span>, <span class="st">"ensemble"</span><span class="op">)</span>,</span>
<span>  zero_time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame of class <em>"mnirs"</em> containing time series data
and metadata.</p></dd>


<dt id="arg-nirs-channels">nirs_channels<a class="anchor" aria-label="anchor" href="#arg-nirs-channels"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of character vectors indicating mNIRS
channel names to operate on within each interval (see <em>Details</em>). Must
match column names in <code>data</code> exactly. Retrieved from metadata if not
defined explicitly.</p></dd>


<dt id="arg-time-channel">time_channel<a class="anchor" aria-label="anchor" href="#arg-time-channel"></a></dt>
<dd><p>A character string indicating the time or sample channel
name. Must match column names in <code>data</code> exactly. Retrieved from metadata
if not defined explicitly.</p></dd>


<dt id="arg-event-channel">event_channel<a class="anchor" aria-label="anchor" href="#arg-event-channel"></a></dt>
<dd><p>An <em>optional</em> character string indicating the event or
lap channel name. Required if <code>event_labels</code> are specified. Must
match column names in <code>data</code> exactly. Retrieved from metadata if not
defined explicitly.</p></dd>


<dt id="arg-sample-rate">sample_rate<a class="anchor" aria-label="anchor" href="#arg-sample-rate"></a></dt>
<dd><p>An <em>optional</em> numeric value for the exported sample rate
in Hz. If not defined explicitly, will be estimated from the data (see
<em>Details</em>).</p></dd>


<dt id="arg-event-times">event_times<a class="anchor" aria-label="anchor" href="#arg-event-times"></a></dt>
<dd><p>A numeric vector of <code>time_channel</code> values indicating
event starts (see <em>Details</em>).</p></dd>


<dt id="arg-event-labels">event_labels<a class="anchor" aria-label="anchor" href="#arg-event-labels"></a></dt>
<dd><p>A character vector of strings to match from
<code>event_channel</code>, indicating event starts.</p></dd>


<dt id="arg-event-samples">event_samples<a class="anchor" aria-label="anchor" href="#arg-event-samples"></a></dt>
<dd><p>An integer vector with sample indices (row numbers)
indicating event starts.</p></dd>


<dt id="arg-span">span<a class="anchor" aria-label="anchor" href="#arg-span"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of two-element numeric vectors specifying the
interval around each event as <code>c(before, after)</code>, in units of
<code>time_channel</code> (see <em>Details</em>).</p></dd>


<dt id="arg-group-events">group_events<a class="anchor" aria-label="anchor" href="#arg-group-events"></a></dt>
<dd><p>Either a character string or a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of numeric
vectors specifying how to group intervals. Interval numbers are sorted
in order of appearance within <code>data</code>.</p><dl><dt><code>"distinct"</code></dt>
<dd><p>Will extract each interval as an independent
data frame (the <em>default</em>).</p></dd>

<dt><code>"ensemble"</code></dt>
<dd><p>Will perform ensemble-averaging across all
detected intervals for each <code>nirs_channel</code>, and return a single
data frame.</p></dd>

<dt><code>list(c(1, 2), c(3, 4))</code></dt>
<dd><p>Will perform ensemble-averaging across
intervals within each group and return a data frame for each group.</p></dd>


</dl></dd>


<dt id="arg-zero-time">zero_time<a class="anchor" aria-label="anchor" href="#arg-zero-time"></a></dt>
<dd><p>A logical to re-calculate <code>time_channel</code> from zero or
preserve the original <code>time_channel</code> values (<code>FALSE</code>, the <em>default</em>).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical to display (the <em>default</em>) or silence (<code>FALSE</code>)
warnings and information messages used for troubleshooting.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of <a href="https://tibble.tidyverse.org/reference/tibble-package.html" class="external-link">tibbles</a> of class
<em>"mnirs"</em> with metadata available with <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>nirs_channels = list()</code> can be used to specify unique data channels
(column names) to operate on within intervals, according to <code>group_events</code>
(see below).</p><ul><li><p>Channels can be specified in seperate list items (e.g.
<code>list(c("A", "B", "C"), "B", c("A", "C"))</code>) to include or exclude from
specific intervals. In this way, bad data channels in a single interval
can be excluded from contaminating the ensemble-averaging.</p></li>
</ul><p><code>event_*</code> arguments can be used to identify intervals of interest in <code>data</code>,
and can be specified three ways (methods can be combined):</p>
<dl><dt><code>event_times</code></dt>
<dd><p>Numeric time values in units of <code>time_channel</code>.</p></dd>

<dt><code>event_samples</code></dt>
<dd><p>Integer sample indices (row numbers).</p></dd>

<dt><code>event_labels</code></dt>
<dd><p>Character patterns to match in <code>event_channel</code>,
case-sensitive and must match exactly.</p></dd>


</dl><ul><li><p>Every unique event detected in <code>data</code> will be extracted according to the
<code>span</code> interval window around it (see below). Events can be specified in
any order. The detected intervals will be extracted and returned in the
order in which they appear.</p></li>
</ul><p><code>span = list()</code> will accept two-element numeric vectors indicating the
interval time window around each detected event, in units of
<code>time_channel</code>, e.g. seconds.</p><ul><li><p><code>span = c(before, after)</code> will typically have a <em>negative</em> <code>before</code> value,
extending the interval window <em>before</em> the target event, and a <em>positive</em>
<code>after</code> value, extending the interval window <em>after</em> the target event,
resulting in an interval window between
<code>[event - span[1], event + span[2]]</code>. However, <code>span</code> will accept any
positive or negative values with reference to the target event, as long
as the range is contained within the bounds of the available <code>data</code>.</p></li>
<li><p>Example for three intervals:</p><dl><dt><code>event_times = list(60, 120, 300)</code></dt>
<dd></dd>

<dt><code>span = list(c(-30, 30), c(30, 90), c(-60, 0))</code></dt>
<dd>
<ul><li><p>Interval 1 would range from <code>30</code> to <code>90</code> seconds.</p></li>
<li><p>Interval 2 would range from <code>150</code> to <code>210</code> seconds.</p></li>
<li><p>Interval 3 would range from <code>240</code> to <code>300</code> seconds.</p></li>
</ul></dd>


</dl></li>
</ul><p><code>group_events = list()</code> can be used to specify the grouping structure of
intervals and return either discrete or ensemble-averaged intervals.</p>
<dl><dt><code>"distinct"</code></dt>
<dd><p>Will extract each interval as an independent
data frame.</p></dd>

<dt><code>"ensemble"</code></dt>
<dd><p>Will perform ensemble-averaging across all
detected intervals for each <code>nirs_channel</code>, and return a single
data frame.</p></dd>

<dt><code>list(c(1, 2), c(3, 4))</code></dt>
<dd><p>Will perform ensemble-averaging across
intervals within each group and return a data frame for each group.</p></dd>


</dl><ul><li><p>Any interval numbers omitted from <code>group_events</code> will be extracted as a
distinct data frame. Interval numbers beyond the number of detected
intervals will be ignored.</p></li>
<li><p><code>group_events</code> will accept a named list and pass on those names to the
list of returned data frames <code>&lt;under development&gt;</code>, e.g.</p><dl><dt><code>group_events = list(low = c(1, 2), high = c(3, 4))</code></dt>
<dd></dd>


</dl><p>Otherwise, default names will be returned as <code>"interval_1"</code>,
<code>"interval_2"</code>, etc. for distinct intervals; <code>"ensemble"</code> for
ensemble-averaging across all intervals; or <code>"group_1_2"</code> etc. for
custom grouping structure.</p></li>
</ul><p>List items or a single vector (e.g. <code>nirs_channels = list(c("A", "B"))</code> or
<code>span = c(-30, 30)</code>) will be recycled forward for all intervals. If the
number of intervals detected exceeds the number of list items, the last
specified list item will be recycled forward to the additional intervals.
List items beyond the number of detected intervals will be ignored.</p>
<p><code>zero_time = TRUE</code> will re-calculate numeric <code>time_channel</code> values
to start from zero at the target event, for each interval. Ensemble-
averaged interval times will always be zeroed. Effectively, this works best
when the event marker indicates the start of the interval. This can
return unexpected time values when the event marker itself is not
included in the interval range (e.g. with <code>span = c(30, 60)</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>mnirs.verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## read example data</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_mnirs.html">read_mnirs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="example_mnirs.html">example_mnirs</a></span><span class="op">(</span><span class="st">"train.red"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nirs_channels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        smo2_left <span class="op">=</span> <span class="st">"SmO2 unfiltered"</span>,</span></span>
<span class="r-in"><span>        smo2_right <span class="op">=</span> <span class="st">"SmO2 unfiltered"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    time_channel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>time <span class="op">=</span> <span class="st">"Timestamp (seconds passed)"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    zero_time <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="resample_mnirs.html">resample_mnirs</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## avoid issues ensemble-averaging irregular samples</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## extract intervals as a list of data frames</span></span></span>
<span class="r-in"><span><span class="fu">extract_intervals</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">data</span>,</span></span>
<span class="r-in"><span>    nirs_channels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">smo2_left</span>, <span class="va">smo2_right</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    event_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">368</span>, <span class="fl">1093</span><span class="op">)</span>, <span class="co">## specify interval events</span></span></span>
<span class="r-in"><span>    span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span>, <span class="co">## specify the event start-end timespans</span></span></span>
<span class="r-in"><span>    group_events <span class="op">=</span> <span class="st">"distinct"</span>, <span class="co">## return all unique intervals</span></span></span>
<span class="r-in"><span>    zero_time <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">## start time from zero</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $interval_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,101 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     time smo2_left smo2_right</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> -<span style="color: #BB0000;">20</span>        55.6       60.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> -<span style="color: #BB0000;">19.9</span>      55.8       60.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">19.8</span>      56.1       60.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> -<span style="color: #BB0000;">19.7</span>      56.3       60.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> -<span style="color: #BB0000;">19.6</span>      56.6       60.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">19.5</span>      56.8       60.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> -<span style="color: #BB0000;">19.4</span>      56.6       60.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">19.3</span>      56.9       59.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">19.2</span>      56.7       60.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">19.1</span>      56.2       59.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,091 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $interval_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,101 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     time smo2_left smo2_right</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> -<span style="color: #BB0000;">20</span>        56.2       57.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> -<span style="color: #BB0000;">19.9</span>      55.7       57.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">19.8</span>      55.3       57.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> -<span style="color: #BB0000;">19.7</span>      55.3       58.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> -<span style="color: #BB0000;">19.6</span>      55.3       58.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">19.5</span>      55.3       57.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> -<span style="color: #BB0000;">19.4</span>      55.3       59.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">19.3</span>      55.3       59.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">19.2</span>      55.3       57.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">19.1</span>      55.7       57.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,091 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ensemble-average across multiple intervals</span></span></span>
<span class="r-in"><span><span class="va">interval_list</span> <span class="op">&lt;-</span> <span class="fu">extract_intervals</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">data</span>,</span></span>
<span class="r-in"><span>    nirs_channels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">smo2_left</span>, <span class="va">smo2_right</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    event_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">368</span>, <span class="fl">1093</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    group_events <span class="op">=</span> <span class="st">"ensemble"</span>, <span class="co">## return ensemble-averaged intervals</span></span></span>
<span class="r-in"><span>    zero_time <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">interval_list</span><span class="op">[[</span><span class="fl">1L</span><span class="op">]</span><span class="op">]</span>, label_time <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="extract_intervals-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jem Arnold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

